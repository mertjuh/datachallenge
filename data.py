import pprint
from datetime import timedelta, date

from matplotlib import ticker
from matplotlib.colors import ListedColormap
from numpy import int32, array, polyfit
import numpy as np
from numpy.polynomial.polynomial import polyfit
import matplotlib.pyplot as plt
import seaborn as sns
import pandas as pd

# This file consists of hardcoded data that was retrieved using the main.py file.
# This is not Ideal but works for now, but could be automated in the future.


dataset = [{'conv_amount': 32803,
            'conv_average_size': 4.299301893119532,
            'conv_total_tweets': 141030,
            'delta_negative_count': 8660,
            'delta_neutral_count': 46000,
            'delta_positive_count': 12517,
            'filter_type': 'NO_AIRLINE',
            'hist_edges': array([-1.7396, -1.62327667, -1.50695333, -1.39063, -1.27430667,
                                 -1.15798333, -1.04166, -0.92533667, -0.80901333, -0.69269,
                                 -0.57636667, -0.46004333, -0.34372, -0.22739667, -0.11107333,
                                 0.00525, 0.12157333, 0.23789667, 0.35422, 0.47054333,
                                 0.58686667, 0.70319, 0.81951333, 0.93583667, 1.05216,
                                 1.16848333, 1.28480667, 1.40113, 1.51745333, 1.63377667,
                                 1.7501]),
            'hist_freq': array([5, 12, 42, 47, 85, 172, 201, 364, 565, 1257, 1018,
                                1323, 1246, 1101, 1246, 1309, 1236, 1879, 1937, 1549, 1699, 937,
                                723, 395, 305, 247, 150, 76, 30, 21], dtype=int32),
            'id': 56377143,
            'response_time': 105.52109578717757,
            'responses': 75108,
            'root_negative_count': 6916,
            'root_neutral_count': 15340,
            'root_positive_count': 10547,
            'screen_name': 'KLM',
            'sentiment_score_max': 1.7501,
            'sentiment_score_mean': 0.037053707370082026,
            'sentiment_score_min': -1.7396,
            'sentiment_score_sd': 0.31822291251541973},
           {'conv_amount': 8248,
            'conv_average_size': 4.432104752667313,
            'conv_total_tweets': 36556,
            'delta_negative_count': 2894,
            'delta_neutral_count': 8271,
            'delta_positive_count': 4851,
            'filter_type': 'NO_AIRLINE',
            'hist_edges': array([-1.604, -1.49257667, -1.38115333, -1.26973, -1.15830667,
                                 -1.04688333, -0.93546, -0.82403667, -0.71261333, -0.60119,
                                 -0.48976667, -0.37834333, -0.26692, -0.15549667, -0.04407333,
                                 0.06735, 0.17877333, 0.29019667, 0.40162, 0.51304333,
                                 0.62446667, 0.73589, 0.84731333, 0.95873667, 1.07016,
                                 1.18158333, 1.29300667, 1.40443, 1.51585333, 1.62727667,
                                 1.7387]),
            'hist_freq': array([7, 18, 19, 32, 45, 68, 96, 181, 274, 248, 413, 505, 362,
                                470, 386, 448, 461, 818, 663, 557, 481, 342, 258, 170, 145, 132,
                                65, 50, 23, 8], dtype=int32),
            'id': 106062176,
            'response_time': 162.08449440518604,
            'responses': 17123,
            'root_negative_count': 2708,
            'root_neutral_count': 2803,
            'root_positive_count': 2737,
            'screen_name': 'airfrance',
            'sentiment_score_max': 1.7387000000000001,
            'sentiment_score_mean': 0.08604389985014986,
            'sentiment_score_min': -1.604,
            'sentiment_score_sd': 0.4029310440590107},
           {'conv_amount': 75549,
            'conv_average_size': 4.088009106672491,
            'conv_total_tweets': 308845,
            'delta_negative_count': 29030,
            'delta_neutral_count': 68034,
            'delta_positive_count': 46182,
            'filter_type': 'NO_AIRLINE',
            'hist_edges': array([-1.7622, -1.64384333, -1.52548667, -1.40713, -1.28877333,
                                 -1.17041667, -1.05206, -0.93370333, -0.81534667, -0.69699,
                                 -0.57863333, -0.46027667, -0.34192, -0.22356333, -0.10520667,
                                 0.01315, 0.13150667, 0.24986333, 0.36822, 0.48657667,
                                 0.60493333, 0.72329, 0.84164667, 0.96000333, 1.07836,
                                 1.19671667, 1.31507333, 1.43343, 1.55178667, 1.67014333,
                                 1.7885]),
            'hist_freq': array([21, 40, 129, 250, 469, 678, 822, 1437, 2085, 2768, 3018,
                                4048, 4819, 4087, 4673, 5394, 5084, 6317, 5915, 5130, 5401, 3969,
                                2687, 1850, 1689, 1173, 684, 421, 123, 31], dtype=int32),
            'id': 18332190,
            'response_time': 356.60075919429386,
            'responses': 136882,
            'root_negative_count': 27342,
            'root_neutral_count': 17272,
            'root_positive_count': 30935,
            'screen_name': 'British_Airways',
            'sentiment_score_max': 1.7885,
            'sentiment_score_mean': 0.0836393058095863,
            'sentiment_score_min': -1.7622,
            'sentiment_score_sd': 0.4305155434934102},
           {'conv_amount': 133028,
            'conv_average_size': 3.544810115163725,
            'conv_total_tweets': 471559,
            'delta_negative_count': 40784,
            'delta_neutral_count': 87323,
            'delta_positive_count': 58760,
            'filter_type': 'NO_AIRLINE',
            'hist_edges': array([-1.7847, -1.66417333, -1.54364667, -1.42312, -1.30259333,
                                 -1.18206667, -1.06154, -0.94101333, -0.82048667, -0.69996,
                                 -0.57943333, -0.45890667, -0.33838, -0.21785333, -0.09732667,
                                 0.0232, 0.14372667, 0.26425333, 0.38478, 0.50530667,
                                 0.62583333, 0.74636, 0.86688667, 0.98741333, 1.10794,
                                 1.22846667, 1.34899333, 1.46952, 1.59004667, 1.71057333,
                                 1.8311]),
            'hist_freq': array([23, 87, 218, 434, 693, 985, 1374, 2093, 2959, 3918, 5032,
                                5984, 6016, 5931, 5990, 6567, 7353, 7838, 7700, 6553, 5875, 5024,
                                3363, 2430, 2007, 1444, 912, 504, 196, 41], dtype=int32),
            'id': 22536055,
            'response_time': 37.2269950224309,
            'responses': 189768,
            'root_negative_count': 51963,
            'root_neutral_count': 28181,
            'root_positive_count': 52884,
            'screen_name': 'AmericanAir',
            'sentiment_score_max': 1.8311000000000002,
            'sentiment_score_mean': 0.07102028876152555,
            'sentiment_score_min': -1.7847,
            'sentiment_score_sd': 0.44659277190813523},
           {'conv_amount': 7285,
            'conv_average_size': 3.9216197666437886,
            'conv_total_tweets': 28569,
            'delta_negative_count': 2592,
            'delta_neutral_count': 4947,
            'delta_positive_count': 4705,
            'filter_type': 'NO_AIRLINE',
            'hist_edges': array([-1.6317, -1.51715333, -1.40260667, -1.28806, -1.17351333,
                                 -1.05896667, -0.94442, -0.82987333, -0.71532667, -0.60078,
                                 -0.48623333, -0.37168667, -0.25714, -0.14259333, -0.02804667,
                                 0.0865, 0.20104667, 0.31559333, 0.43014, 0.54468667,
                                 0.65923333, 0.77378, 0.88832667, 1.00287333, 1.11742,
                                 1.23196667, 1.34651333, 1.46106, 1.57560667, 1.69015333,
                                 1.8047]),
            'hist_freq': array([4, 10, 19, 33, 44, 65, 132, 158, 209, 369, 303, 355, 422,
                                388, 406, 452, 542, 578, 536, 484, 346, 463, 203, 144, 132, 127,
                                100, 129, 88, 56], dtype=int32),
            'id': 124476322,
            'response_time': 64.73490580236694,
            'responses': 10872,
            'root_negative_count': 2328,
            'root_neutral_count': 2127,
            'root_positive_count': 2830,
            'screen_name': 'lufthansa',
            'sentiment_score_max': 1.8047,
            'sentiment_score_mean': 0.14117107154524663,
            'sentiment_score_min': -1.6317,
            'sentiment_score_sd': 0.4997548843084923},
           {'conv_amount': 3757,
            'conv_average_size': 4.70055895661432,
            'conv_total_tweets': 17660,
            'delta_negative_count': 1480,
            'delta_neutral_count': 3692,
            'delta_positive_count': 2019,
            'filter_type': 'NO_AIRLINE',
            'hist_edges': array([-1.6852, -1.56946, -1.45372, -1.33798, -1.22224, -1.1065,
                                 -0.99076, -0.87502, -0.75928, -0.64354, -0.5278, -0.41206,
                                 -0.29632, -0.18058, -0.06484, 0.0509, 0.16664, 0.28238,
                                 0.39812, 0.51386, 0.6296, 0.74534, 0.86108, 0.97682,
                                 1.09256, 1.2083, 1.32404, 1.43978, 1.55552, 1.67126,
                                 1.787]),
            'hist_freq': array([4, 1, 5, 20, 27, 25, 51, 107, 97, 386, 143, 172, 191,
                                159, 153, 181, 206, 242, 271, 316, 250, 170, 92, 79, 63, 44,
                                25, 9, 6, 4], dtype=int32),
            'id': 26223583,
            'response_time': 93.916924411778,
            'responses': 7381,
            'root_negative_count': 1267,
            'root_neutral_count': 1669,
            'root_positive_count': 821,
            'screen_name': 'airberlin',
            'sentiment_score_max': 1.787,
            'sentiment_score_mean': 0.05390653594771242,
            'sentiment_score_min': -1.6852,
            'sentiment_score_sd': 0.4258175146074458},
           {'conv_amount': 1374,
            'conv_average_size': 5.047307132459971,
            'conv_total_tweets': 6935,
            'delta_negative_count': 538,
            'delta_neutral_count': 1095,
            'delta_positive_count': 852,
            'filter_type': 'NO_AIRLINE',
            'hist_edges': array([-1.4496, -1.34153667, -1.23347333, -1.12541, -1.01734667,
                                 -0.90928333, -0.80122, -0.69315667, -0.58509333, -0.47703,
                                 -0.36896667, -0.26090333, -0.15284, -0.04477667, 0.06328667,
                                 0.17135, 0.27941333, 0.38747667, 0.49554, 0.60360333,
                                 0.71166667, 0.81973, 0.92779333, 1.03585667, 1.14392,
                                 1.25198333, 1.36004667, 1.46811, 1.57617333, 1.68423667,
                                 1.7923]),
            'hist_freq': array([2, 5, 3, 13, 19, 25, 20, 112, 44, 65, 65, 74, 68,
                                55, 65, 79, 96, 103, 102, 107, 84, 54, 25, 29, 14, 13,
                                13, 13, 22, 1], dtype=int32),
            'id': 2182373406,
            'response_time': 66.40573574561404,
            'responses': 2660,
            'root_negative_count': 540,
            'root_neutral_count': 517,
            'root_positive_count': 317,
            'screen_name': 'airberlinAssist',
            'sentiment_score_max': 1.7923,
            'sentiment_score_mean': 0.10648953722334005,
            'sentiment_score_min': -1.4496,
            'sentiment_score_sd': 0.4705050104134194},
           {'conv_amount': 28170,
            'conv_average_size': 3.3047923322683705,
            'conv_total_tweets': 93096,
            'delta_negative_count': 7567,
            'delta_neutral_count': 22764,
            'delta_positive_count': 12712,
            'filter_type': 'NO_AIRLINE',
            'hist_edges': array([-1.6626, -1.54849667, -1.43439333, -1.32029, -1.20618667,
                                 -1.09208333, -0.97798, -0.86387667, -0.74977333, -0.63567,
                                 -0.52156667, -0.40746333, -0.29336, -0.17925667, -0.06515333,
                                 0.04895, 0.16305333, 0.27715667, 0.39126, 0.50536333,
                                 0.61946667, 0.73357, 0.84767333, 0.96177667, 1.07588,
                                 1.18998333, 1.30408667, 1.41819, 1.53229333, 1.64639667,
                                 1.7605]),
            'hist_freq': array([6, 17, 46, 84, 107, 181, 307, 397, 558, 683, 995,
                                1298, 1064, 1203, 1113, 1494, 1671, 1767, 1731, 1282, 1192, 954,
                                634, 490, 424, 308, 142, 81, 42, 8], dtype=int32),
            'id': 38676903,
            'response_time': 1430.959347511622,
            'responses': 36282,
            'root_negative_count': 11885,
            'root_neutral_count': 6650,
            'root_positive_count': 9635,
            'screen_name': 'easyJet',
            'sentiment_score_max': 1.7605,
            'sentiment_score_mean': 0.07638927119392237,
            'sentiment_score_min': -1.6626,
            'sentiment_score_sd': 0.3912396321059461},
           {'conv_amount': 14929,
            'conv_average_size': 4.236854444370018,
            'conv_total_tweets': 63252,
            'delta_negative_count': 5416,
            'delta_neutral_count': 7681,
            'delta_positive_count': 7949,
            'filter_type': 'NO_AIRLINE',
            'hist_edges': array([-1.7209, -1.60731, -1.49372, -1.38013, -1.26654, -1.15295,
                                 -1.03936, -0.92577, -0.81218, -0.69859, -0.585, -0.47141,
                                 -0.35782, -0.24423, -0.13064, -0.01705, 0.09654, 0.21013,
                                 0.32372, 0.43731, 0.5509, 0.66449, 0.77808, 0.89167,
                                 1.00526, 1.11885, 1.23244, 1.34603, 1.45962, 1.57321,
                                 1.6868]),
            'hist_freq': array([2, 3, 23, 28, 52, 84, 125, 216, 352, 494, 577,
                                825, 861, 779, 923, 788, 925, 1121, 1190, 1143, 708, 717,
                                551, 293, 230, 154, 125, 50, 14, 12], dtype=int32),
            'id': 1542862735,
            'response_time': 55.7786880141252,
            'responses': 25156,
            'root_negative_count': 4173,
            'root_neutral_count': 4635,
            'root_positive_count': 6121,
            'screen_name': 'Ryanair',
            'sentiment_score_max': 1.6868,
            'sentiment_score_mean': 0.07705331179321487,
            'sentiment_score_min': -1.7208999999999999,
            'sentiment_score_sd': 0.4309030862147618},
           {'conv_amount': 4402,
            'conv_average_size': 3.71240345297592,
            'conv_total_tweets': 16342,
            'delta_negative_count': 1430,
            'delta_neutral_count': 3249,
            'delta_positive_count': 2114,
            'filter_type': 'NO_AIRLINE',
            'hist_edges': array([-1.6358, -1.52291333, -1.41002667, -1.29714, -1.18425333,
                                 -1.07136667, -0.95848, -0.84559333, -0.73270667, -0.61982,
                                 -0.50693333, -0.39404667, -0.28116, -0.16827333, -0.05538667,
                                 0.0575, 0.17038667, 0.28327333, 0.39616, 0.50904667,
                                 0.62193333, 0.73482, 0.84770667, 0.96059333, 1.07348,
                                 1.18636667, 1.29925333, 1.41214, 1.52502667, 1.63791333,
                                 1.7508]),
            'hist_freq': array([4, 16, 15, 17, 17, 36, 56, 117, 111, 121, 153, 228, 227,
                                205, 227, 220, 175, 288, 301, 184, 235, 190, 115, 87, 62, 55,
                                34, 23, 17, 8], dtype=int32),
            'id': 253340062,
            'response_time': 75.39975951879912,
            'responses': 7128,
            'root_negative_count': 1107,
            'root_neutral_count': 1208,
            'root_positive_count': 2087,
            'screen_name': 'SingaporeAir',
            'sentiment_score_max': 1.7508,
            'sentiment_score_mean': 0.07825211246871781,
            'sentiment_score_min': -1.6358000000000001,
            'sentiment_score_sd': 0.4391956695056272},
           {'conv_amount': 14295,
            'conv_average_size': 3.1090591115774746,
            'conv_total_tweets': 44444,
            'delta_negative_count': 4212,
            'delta_neutral_count': 10697,
            'delta_positive_count': 5036,
            'filter_type': 'NO_AIRLINE',
            'hist_edges': array([-1.8681, -1.74603667, -1.62397333, -1.50191, -1.37984667,
                                 -1.25778333, -1.13572, -1.01365667, -0.89159333, -0.76953,
                                 -0.64746667, -0.52540333, -0.40334, -0.28127667, -0.15921333,
                                 -0.03715, 0.08491333, 0.20697667, 0.32904, 0.45110333,
                                 0.57316667, 0.69523, 0.81729333, 0.93935667, 1.06142,
                                 1.18348333, 1.30554667, 1.42761, 1.54967333, 1.67173667,
                                 1.7938]),
            'hist_freq': array([2, 3, 10, 39, 47, 92, 84, 410, 264, 296, 438, 474, 683,
                                520, 691, 562, 615, 646, 747, 594, 518, 494, 354, 228, 155, 109,
                                98, 45, 25, 5], dtype=int32),
            'id': 218730857,
            'response_time': 266.1590416823585,
            'responses': 17525,
            'root_negative_count': 3589,
            'root_neutral_count': 3496,
            'root_positive_count': 7210,
            'screen_name': 'Qantas',
            'sentiment_score_max': 1.7938,
            'sentiment_score_mean': 0.031480586613186264,
            'sentiment_score_min': -1.8681,
            'sentiment_score_sd': 0.4202636860605078},
           {'conv_amount': 4763,
            'conv_average_size': 4.138568129330254,
            'conv_total_tweets': 19712,
            'delta_negative_count': 2328,
            'delta_neutral_count': 3465,
            'delta_positive_count': 2509,
            'filter_type': 'NO_AIRLINE',
            'hist_edges': array([-1.8347, -1.71712333, -1.59954667, -1.48197, -1.36439333,
                                 -1.24681667, -1.12924, -1.01166333, -0.89408667, -0.77651,
                                 -0.65893333, -0.54135667, -0.42378, -0.30620333, -0.18862667,
                                 -0.07105, 0.04652667, 0.16410333, 0.28168, 0.39925667,
                                 0.51683333, 0.63441, 0.75198667, 0.86956333, 0.98714,
                                 1.10471667, 1.22229333, 1.33987, 1.45744667, 1.57502333,
                                 1.6926]),
            'hist_freq': array([1, 1, 12, 14, 24, 31, 37, 88, 595, 132, 182, 213, 297,
                                244, 294, 276, 312, 304, 344, 386, 250, 262, 235, 124, 64, 45,
                                35, 22, 8, 5], dtype=int32),
            'id': 45621423,
            'response_time': 15.823375656754235,
            'responses': 7499,
            'root_negative_count': 863,
            'root_neutral_count': 1528,
            'root_positive_count': 2372,
            'screen_name': 'EtihadAirways',
            'sentiment_score_max': 1.6926,
            'sentiment_score_mean': -0.0009233558178752191,
            'sentiment_score_min': -1.8347,
            'sentiment_score_sd': 0.46399522576509356},
           {'conv_amount': 14058,
            'conv_average_size': 4.124484279413857,
            'conv_total_tweets': 57982,
            'delta_negative_count': 5158,
            'delta_neutral_count': 7459,
            'delta_positive_count': 8211,
            'filter_type': 'NO_AIRLINE',
            'hist_edges': array([-1.6968, -1.58136, -1.46592, -1.35048, -1.23504, -1.1196,
                                 -1.00416, -0.88872, -0.77328, -0.65784, -0.5424, -0.42696,
                                 -0.31152, -0.19608, -0.08064, 0.0348, 0.15024, 0.26568,
                                 0.38112, 0.49656, 0.612, 0.72744, 0.84288, 0.95832,
                                 1.07376, 1.1892, 1.30464, 1.42008, 1.53552, 1.65096,
                                 1.7664]),
            'hist_freq': array([8, 13, 22, 53, 97, 114, 187, 372, 373, 394, 618,
                                823, 728, 763, 798, 878, 861, 1038, 1260, 821, 922, 732,
                                480, 350, 246, 177, 115, 66, 42, 18], dtype=int32),
            'id': 20626359,
            'response_time': 32.624860999033245,
            'responses': 23446,
            'root_negative_count': 4191,
            'root_neutral_count': 3895,
            'root_positive_count': 5972,
            'screen_name': 'VirginAtlantic',
            'sentiment_score_max': 1.7664,
            'sentiment_score_mean': 0.10384185711542156,
            'sentiment_score_min': -1.6968,
            'sentiment_score_sd': 0.4726843448913515}]

year_data = {0: 0,
             1: 0,
             2: 0,
             3: 0,
             4: 0,
             5: 0,
             6: 0,
             7: 0,
             8: 0,
             9: 0,
             10: 0,
             11: 0,
             12: 0,
             13: 0,
             14: 0,
             15: 0,
             16: 0,
             17: 0,
             18: 0,
             19: 0,
             20: 0,
             21: 0,
             22: 0,
             23: 0,
             24: 0,
             25: 0,
             26: 0,
             27: 972,
             28: 1421,
             29: 1274,
             30: 1738,
             31: 1359,
             32: 1665,
             33: 1438,
             34: 1650,
             35: 1262,
             36: 1262,
             37: 1661,
             38: 1928,
             39: 1807,
             40: 2230,
             41: 1878,
             42: 1800,
             43: 1811,
             44: 1684,
             45: 1599,
             46: 1368,
             47: 1626,
             48: 2063,
             49: 1893,
             50: 1494,
             51: 1597,
             52: 1744,
             53: 1792,
             54: 1640,
             55: 1996,
             56: 1740,
             57: 1774,
             58: 2045,
             59: 1591,
             60: 1832,
             61: 2183,
             62: 2122,
             63: 1865,
             64: 1810,
             65: 2008,
             66: 1595,
             67: 1666,
             68: 2065,
             69: 2246,
             70: 2040,
             71: 2315,
             72: 3724,
             73: 2480,
             74: 1897,
             75: 2032,
             76: 1897,
             77: 1650,
             78: 1563,
             79: 1990,
             80: 1766,
             81: 1821,
             82: 1954,
             83: 2112,
             84: 1842,
             85: 1532,
             86: 2111,
             87: 1749,
             88: 1959,
             89: 0,
             90: 0,
             91: 0,
             92: 0,
             93: 0,
             94: 0,
             95: 0,
             96: 0,
             97: 0,
             98: 0,
             99: 0,
             100: 0,
             101: 0,
             102: 0,
             103: 0,
             104: 0,
             105: 0,
             106: 0,
             107: 0,
             108: 0,
             109: 0,
             110: 0,
             111: 0,
             112: 0,
             113: 0,
             114: 0,
             115: 0,
             116: 0,
             117: 0,
             118: 0,
             119: 0,
             120: 0,
             121: 0,
             122: 0,
             123: 0,
             124: 0,
             125: 0,
             126: 0,
             127: 0,
             128: 0,
             129: 0,
             130: 0,
             131: 0,
             132: 0,
             133: 0,
             134: 0,
             135: 0,
             136: 0,
             137: 0,
             138: 0,
             139: 0,
             140: 0,
             141: 0,
             142: 0,
             143: 0,
             144: 0,
             145: 0,
             146: 0,
             147: 0,
             148: 0,
             149: 0,
             150: 0,
             151: 0,
             152: 0,
             153: 5,
             154: 0,
             155: 0,
             156: 0,
             157: 0,
             158: 0,
             159: 0,
             160: 22,
             161: 0,
             162: 0,
             163: 4,
             164: 0,
             165: 0,
             166: 0,
             167: 0,
             168: 0,
             169: 0,
             170: 0,
             171: 0,
             172: 0,
             173: 0,
             174: 0,
             175: 4,
             176: 0,
             177: 28,
             178: 0,
             179: 10,
             180: 0,
             181: 0,
             182: 9,
             183: 0,
             184: 13,
             185: 0,
             186: 10,
             187: 17,
             188: 1592,
             189: 2261,
             190: 2753,
             191: 2893,
             192: 3251,
             193: 2801,
             194: 2534,
             195: 2719,
             196: 3358,
             197: 3563,
             198: 4109,
             199: 2622,
             200: 2992,
             201: 3483,
             202: 2468,
             203: 3067,
             204: 4045,
             205: 3114,
             206: 2929,
             207: 3244,
             208: 4067,
             209: 2801,
             210: 3472,
             211: 5669,
             212: 3962,
             213: 3560,
             214: 3750,
             215: 3130,
             216: 3417,
             217: 2920,
             218: 3421,
             219: 2696,
             220: 2945,
             221: 3189,
             222: 2987,
             223: 2784,
             224: 1300,
             225: 0,
             226: 0,
             227: 0,
             228: 0,
             229: 0,
             230: 0,
             231: 0,
             232: 0,
             233: 0,
             234: 0,
             235: 1669,
             236: 2973,
             237: 2304,
             238: 2305,
             239: 2547,
             240: 2065,
             241: 2001,
             242: 2165,
             243: 2084,
             244: 2248,
             245: 2388,
             246: 2941,
             247: 2144,
             248: 1477,
             249: 2351,
             250: 2583,
             251: 2066,
             252: 2207,
             253: 2636,
             254: 1996,
             255: 1582,
             256: 2053,
             257: 1662,
             258: 2116,
             259: 1931,
             260: 2138,
             261: 1804,
             262: 1871,
             263: 2633,
             264: 2151,
             265: 1589,
             266: 580,
             267: 2066,
             268: 1634,
             269: 2000,
             270: 2455,
             271: 2008,
             272: 1784,
             273: 2372,
             274: 2431,
             275: 2011,
             276: 1777,
             277: 2061,
             278: 2086,
             279: 3061,
             280: 2853,
             281: 2376,
             282: 2070,
             283: 1591,
             284: 2247,
             285: 1779,
             286: 1598,
             287: 1843,
             288: 1741,
             289: 1648,
             290: 1842,
             291: 2156,
             292: 2038,
             293: 1833,
             294: 1994,
             295: 2157,
             296: 2046,
             297: 1955,
             298: 2020,
             299: 1826,
             300: 1739,
             301: 1919,
             302: 2368,
             303: 2163,
             304: 1866,
             305: 1924,
             306: 1733,
             307: 1642,
             308: 2213,
             309: 2028,
             310: 2433,
             311: 1383,
             312: 452,
             313: 0,
             314: 0,
             315: 0,
             316: 0,
             317: 0,
             318: 0,
             319: 0,
             320: 884,
             321: 1740,
             322: 1949,
             323: 1849,
             324: 2000,
             325: 1564,
             326: 1793,
             327: 1511,
             328: 1913,
             329: 1648,
             330: 891,
             331: 1468,
             332: 2024,
             333: 2421,
             334: 2000,
             335: 1755,
             336: 1709,
             337: 1710,
             338: 1681,
             339: 1857,
             340: 2018,
             341: 1577,
             342: 1668,
             343: 1637,
             344: 2336,
             345: 1991,
             346: 2087,
             347: 2455,
             348: 1996,
             349: 1665,
             350: 2359,
             351: 2772,
             352: 3892,
             353: 4066,
             354: 2773,
             355: 2648,
             356: 3003,
             357: 3550,
             358: 2996,
             359: 3355,
             360: 1829,
             361: 2508,
             362: 2802,
             363: 2470,
             364: 937}

airlines_abv = ['KLM', 'A.F.', 'B.A.', 'A.A.', 'LU', 'A.B.', 'ABA',
                'EJ', 'RY', 'S.A.', 'QA', 'E.A.', 'V.A.']

food_dataset = [{'conv_amount': 2369,
                 'conv_average_size': 3.10510764035458,
                 'conv_total_tweets': 7356,
                 'hist_edges': array([-1.6531, -1.31775, -0.9824, -0.64705, -0.3117, 0.02365,
                                      0.359, 0.69435, 1.0297, 1.36505, 1.7004]),
                 'hist_freq': array([15, 44, 168, 343, 3057, 371, 355, 188, 82, 20],
                                    dtype=int32),
                 'id': 56377143,
                 'negative_count': 923,
                 'neutral_count': 2684,
                 'positive_count': 1036,
                 'response_time': 108.66477653923673,
                 'responses': 5127,
                 'screen_name': 'KLM',
                 'sentiment_score_max': 1.7004000000000001,
                 'sentiment_score_mean': 0.024280335989661856,
                 'sentiment_score_min': -1.6531,
                 'sentiment_score_sd': 0.38267921353620044},
                {'conv_amount': 698,
                 'conv_average_size': 3.21919770773639,
                 'conv_total_tweets': 2247,
                 'hist_edges': array([-1.5213, -1.21233, -0.90336, -0.59439, -0.28542, 0.02355,
                                      0.33252, 0.64149, 0.95046, 1.25943, 1.5684]),
                 'hist_freq': array([6, 18, 62, 98, 763, 111, 142, 66, 32, 11], dtype=int32),
                 'id': 106062176,
                 'negative_count': 294,
                 'neutral_count': 646,
                 'positive_count': 369,
                 'response_time': 76.94872963627662,
                 'responses': 1393,
                 'screen_name': 'airfrance',
                 'sentiment_score_max': 1.5684,
                 'sentiment_score_mean': 0.04937043544690604,
                 'sentiment_score_min': -1.5213,
                 'sentiment_score_sd': 0.41116937774251144},
                {'conv_amount': 13961,
                 'conv_average_size': 3.295036172193969,
                 'conv_total_tweets': 46002,
                 'hist_edges': array([-1.8332, -1.47204, -1.11088, -0.74972, -0.38856, -0.0274,
                                      0.33376, 0.69492, 1.05608, 1.41724, 1.7784]),
                 'hist_freq': array([80, 383, 1088, 2182, 2900, 15610, 2923, 1675, 697,
                                     107], dtype=int32),
                 'id': 18332190,
                 'negative_count': 6832,
                 'neutral_count': 12411,
                 'positive_count': 8402,
                 'response_time': 353.5165627280912,
                 'responses': 26287,
                 'screen_name': 'British_Airways',
                 'sentiment_score_max': 1.7784,
                 'sentiment_score_mean': 0.03636903237475131,
                 'sentiment_score_min': -1.8332,
                 'sentiment_score_sd': 0.4597333205298218},
                {'conv_amount': 17225,
                 'conv_average_size': 2.523947750362845,
                 'conv_total_tweets': 43475,
                 'hist_edges': array([-1.7847, -1.42901, -1.07332, -0.71763, -0.36194, -0.00625,
                                      0.34944, 0.70513, 1.06082, 1.41651, 1.7722]),
                 'hist_freq': array([82, 383, 1117, 1982, 2565, 13751, 2363, 1319, 553,
                                     122], dtype=int32),
                 'id': 22536055,
                 'negative_count': 6161,
                 'neutral_count': 11369,
                 'positive_count': 6707,
                 'response_time': 37.0685238869642,
                 'responses': 24535,
                 'screen_name': 'AmericanAir',
                 'sentiment_score_max': 1.7722,
                 'sentiment_score_mean': 0.02204281057886702,
                 'sentiment_score_min': -1.7847,
                 'sentiment_score_sd': 0.4588309934779562},
                {'conv_amount': 774,
                 'conv_average_size': 2.4754521963824287,
                 'conv_total_tweets': 1916,
                 'hist_edges': array([-1.6317, -1.32984, -1.02798, -0.72612, -0.42426, -0.1224,
                                      0.17946, 0.48132, 0.78318, 1.08504, 1.3869]),
                 'hist_freq': array([6, 16, 61, 64, 124, 672, 103, 66, 40, 17], dtype=int32),
                 'id': 124476322,
                 'negative_count': 321,
                 'neutral_count': 538,
                 'positive_count': 310,
                 'response_time': 64.34324674873737,
                 'responses': 1056,
                 'screen_name': 'lufthansa',
                 'sentiment_score_max': 1.3869,
                 'sentiment_score_mean': -0.010377673224978613,
                 'sentiment_score_min': -1.6317,
                 'sentiment_score_sd': 0.41841926669741486},
                {'conv_amount': 162,
                 'conv_average_size': 3.253086419753086,
                 'conv_total_tweets': 527,
                 'hist_edges': array([-1.1769, -0.89253, -0.60816, -0.32379, -0.03942, 0.24495,
                                      0.52932, 0.81369, 1.09806, 1.38243, 1.6668]),
                 'hist_freq': array([7, 19, 26, 35, 164, 19, 22, 9, 4, 2], dtype=int32),
                 'id': 26223583,
                 'negative_count': 90,
                 'neutral_count': 143,
                 'positive_count': 74,
                 'response_time': 98.98145500588929,
                 'responses': 283,
                 'screen_name': 'airberlin',
                 'sentiment_score_max': 1.6667999999999998,
                 'sentiment_score_mean': 0.0016032573289902236,
                 'sentiment_score_min': -1.1769,
                 'sentiment_score_sd': 0.42580228875607395},
                {'conv_amount': 77,
                 'conv_average_size': 3.948051948051948,
                 'conv_total_tweets': 304,
                 'hist_edges': array([-1.0957, -0.81858, -0.54146, -0.26434, 0.01278, 0.2899,
                                      0.56702, 0.84414, 1.12126, 1.39838, 1.6755]),
                 'hist_freq': array([5, 4, 15, 65, 6, 17, 21, 6, 5, 28], dtype=int32),
                 'id': 2182373406,
                 'negative_count': 36,
                 'neutral_count': 53,
                 'positive_count': 83,
                 'response_time': 44.67232199074074,
                 'responses': 144,
                 'screen_name': 'airberlinAssist',
                 'sentiment_score_max': 1.6755,
                 'sentiment_score_mean': 0.372718023255814,
                 'sentiment_score_min': -1.0957000000000001,
                 'sentiment_score_sd': 0.6861696177946562},
                {'conv_amount': 2052,
                 'conv_average_size': 2.259746588693957,
                 'conv_total_tweets': 4637,
                 'hist_edges': array([-1.5534, -1.22201, -0.89062, -0.55923, -0.22784, 0.10355,
                                      0.43494, 0.76633, 1.09772, 1.42911, 1.7605]),
                 'hist_freq': array([27, 103, 176, 227, 1873, 273, 228, 113, 54, 11],
                                    dtype=int32),
                 'id': 38676903,
                 'negative_count': 706,
                 'neutral_count': 1604,
                 'positive_count': 775,
                 'response_time': 1531.3890646798704,
                 'responses': 2676,
                 'screen_name': 'easyJet',
                 'sentiment_score_max': 1.7605,
                 'sentiment_score_mean': 0.00768606158833063,
                 'sentiment_score_min': -1.5534,
                 'sentiment_score_sd': 0.4388696842871147},
                {'conv_amount': 911,
                 'conv_average_size': 4.013172338090011,
                 'conv_total_tweets': 3656,
                 'hist_edges': array([-1.3041, -1.01481, -0.72552, -0.43623, -0.14694, 0.14235,
                                      0.43164, 0.72093, 1.01022, 1.29951, 1.5888]),
                 'hist_freq': array([19, 62, 141, 194, 839, 232, 196, 93, 28, 10], dtype=int32),
                 'id': 1542862735,
                 'negative_count': 498,
                 'neutral_count': 686,
                 'positive_count': 630,
                 'response_time': 46.11101643356644,
                 'responses': 1573,
                 'screen_name': 'Ryanair',
                 'sentiment_score_max': 1.5888,
                 'sentiment_score_mean': 0.049229382579933846,
                 'sentiment_score_min': -1.3041,
                 'sentiment_score_sd': 0.42819787249187113},
                {'conv_amount': 704,
                 'conv_average_size': 3.1548295454545454,
                 'conv_total_tweets': 2221,
                 'hist_edges': array([-1.5822, -1.2592, -0.9362, -0.6132, -0.2902, 0.0328, 0.3558,
                                      0.6788, 1.0018, 1.3248, 1.6478]),
                 'hist_freq': array([7, 25, 125, 142, 686, 127, 119, 72, 23, 18], dtype=int32),
                 'id': 253340062,
                 'negative_count': 438,
                 'neutral_count': 532,
                 'positive_count': 374,
                 'response_time': 54.27973770973155,
                 'responses': 1192,
                 'screen_name': 'SingaporeAir',
                 'sentiment_score_max': 1.6478000000000002,
                 'sentiment_score_mean': -0.017613095238095247,
                 'sentiment_score_min': -1.5822,
                 'sentiment_score_sd': 0.47344601048418994},
                {'conv_amount': 1971,
                 'conv_average_size': 1.9812278031456114,
                 'conv_total_tweets': 3905,
                 'hist_edges': array([-1.5737, -1.23941, -0.90512, -0.57083, -0.23654, 0.09775,
                                      0.43204, 0.76633, 1.10062, 1.43491, 1.7692]),
                 'hist_freq': array([14, 49, 141, 187, 1747, 188, 174, 108, 32, 14],
                                    dtype=int32),
                 'id': 218730857,
                 'negative_count': 568,
                 'neutral_count': 1514,
                 'positive_count': 572,
                 'response_time': 234.81280398504725,
                 'responses': 2363,
                 'screen_name': 'Qantas',
                 'sentiment_score_max': 1.7692,
                 'sentiment_score_mean': 0.019193820648078373,
                 'sentiment_score_min': -1.5737,
                 'sentiment_score_sd': 0.4074210357927381},
                {'conv_amount': 636,
                 'conv_average_size': 5.366352201257862,
                 'conv_total_tweets': 3413,
                 'hist_edges': array([-1.6333, -1.32513, -1.01696, -0.70879, -0.40062, -0.09245,
                                      0.21572, 0.52389, 0.83206, 1.14023, 1.4484]),
                 'hist_freq': array([17, 23, 340, 194, 255, 643, 137, 84, 40, 17], dtype=int32),
                 'id': 45621423,
                 'negative_count': 919,
                 'neutral_count': 401,
                 'positive_count': 430,
                 'response_time': 9.8468963783655,
                 'responses': 1399,
                 'screen_name': 'EtihadAirways',
                 'sentiment_score_max': 1.4484,
                 'sentiment_score_mean': -0.18732491428571432,
                 'sentiment_score_min': -1.6333,
                 'sentiment_score_sd': 0.5072391766154938},
                {'conv_amount': 2548,
                 'conv_average_size': 3.1981946624803768,
                 'conv_total_tweets': 8149,
                 'hist_edges': array([-1.6806, -1.33823, -0.99586, -0.65349, -0.31112, 0.03125,
                                      0.37362, 0.71599, 1.05836, 1.40073, 1.7431]),
                 'hist_freq': array([13, 49, 212, 310, 1896, 483, 541, 303, 109, 27],
                                    dtype=int32),
                 'id': 20626359,
                 'negative_count': 1019,
                 'neutral_count': 1424,
                 'positive_count': 1500,
                 'response_time': 25.79680992675705,
                 'responses': 4278,
                 'screen_name': 'VirginAtlantic',
                 'sentiment_score_max': 1.7431,
                 'sentiment_score_mean': 0.09148102967283794,
                 'sentiment_score_min': -1.6806,
                 'sentiment_score_sd': 0.47999559685005433}]


def average_conv_length_sentiment_correlation():
    frames = []
    for entry in dataset:
        frames.append({"average_conv_length": entry['conv_average_size'],
                       "sentiment_score": entry['sentiment_score_mean']
                       })
    dataframe = pd.DataFrame(frames)
    ax = sns.regplot(x="average_conv_length", y="sentiment_score", data=dataframe)
    plt.show()


def responses_sentiment_correlation():
    frames = []
    for entry in dataset:
        frames.append({"responses": entry['responses'],
                       "sentiment_score": entry['sentiment_score_mean']})
    dataframe = pd.DataFrame(frames)
    ax = sns.regplot(x="responses", y="sentiment_score", data=dataframe)
    plt.show()


def food_distribution():
    frames = []
    for entry in food_dataset:
        if entry['id'] == 22536055:  # american air
            frq = entry['hist_freq']
            edges = entry['hist_edges']
            fig, ax = plt.subplots()
            ax.bar(edges[:-1], frq, width=np.diff(edges), ec="k", align="edge")
            plt.show()


def conversation_length_through_year_chart():
    print(list(year_data.values()))

    date_list = []
    for x in year_data.keys():
        vals = (date(2016, 1, 1) + timedelta(days=x)).strftime("%d %b")
        print(vals)
        date_list.append(vals)

    # b= plt.bar(range(len(year_data)), date_list, align='center')

    ax = plt.subplot(111)
    ax.bar(date_list, list(year_data.values()))
    # ax.xaxis_date()

    plt.title("Conversations throughout the year")

    # # for python 2.x:
    # plt.bar(range(len(D)), D.values(), align='center')  # python 2.x
    plt.xticks(rotation=90, fontsize=10)
    ax.xaxis.set_major_locator(ticker.MultipleLocator(30))

    # plt.show()

    plt.savefig("year_conversation.svg", bbox_inches='tight')


def stacked_sentiment_bars(show_deltas=True):
    if show_deltas:
        delta_string = "delta_"
        sign_string = "Δ "
    else:
        delta_string = "root_"
        sign_string = ""

    frames = []

    columns = []
    for entry in dataset:
        columns.append(entry["screen_name"])

    for i, entry in enumerate(dataset):
        total = entry[delta_string + 'negative_count'] + entry[delta_string + 'neutral_count'] + entry[
            delta_string + 'positive_count']

        frame = {
            "abv": airlines_abv[i],
            "screen_name": entry['screen_name'],
            sign_string + "negative": entry[delta_string + 'negative_count'] * 100 / total,
            sign_string + "neutral": entry[delta_string + 'neutral_count'] * 100 / total,
            sign_string + "positive": entry[delta_string + 'positive_count'] * 100 / total
        }
        pprint.pprint(frame)
        frames.append(frame)

    frames = sorted(frames, reverse=True, key=lambda l: l["abv"])

    df = pd.DataFrame(frames)

    pprint.pprint(df)
    pl = df.plot.barh(stacked=True, x="abv", color=["red", "orange", "green"])
    if show_deltas:
        plt.savefig("stacked_delta.svg", bbox_inches='tight')
    else:
        plt.savefig("stacked_root.svg", bbox_inches='tight')

# The following functions are no longer used in the project andcould also be omitted.
# responses_sentiment_correlation() unused in the poster
# food_distribution() unused in the poster

# conversation_length_through_year_chart() # shows the conversations graph throughout the year named: year_conversation.svg
# stacked_sentiment_bars(show_deltas=False)  # shows the stacked barchart with negative/neutral/positive distribution named: stacked_root.svg
# stacked_sentiment_bars(show_deltas=True)  # same but then for deltas named: stacked_delta.svg
