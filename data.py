import pprint
from datetime import timedelta, date

from matplotlib import ticker
from matplotlib.colors import ListedColormap
from numpy import int32, array, polyfit
import numpy as np
from numpy.polynomial.polynomial import polyfit
import matplotlib.pyplot as plt
import seaborn as sns
import pandas as pd

# This file consists of hardcoded data that was retrieved using the main.py file.
# This is not Ideal but works for now, but could be automated in the future.
from main import sorted_over_year

dataset =[{'conv_amount': 262,
  'conv_average_size': 4.595419847328245,
  'conv_total_tweets': 1204,
  'delta_negative_count': 86,
  'delta_neutral_count': 386,
  'delta_positive_count': 126,
  'filter_type': 'BOTH',
  'hist_edges': array([-1.178  , -1.08086, -0.98372, -0.88658, -0.78944, -0.6923 ,
       -0.59516, -0.49802, -0.40088, -0.30374, -0.2066 , -0.10946,
       -0.01232,  0.08482,  0.18196,  0.2791 ,  0.37624,  0.47338,
        0.57052,  0.66766,  0.7648 ,  0.86194,  0.95908,  1.05622,
        1.15336,  1.2505 ,  1.34764,  1.44478,  1.54192,  1.63906,
        1.7362 ]),
  'hist_freq': array([ 2,  0,  1,  1,  7,  1,  3, 25, 10, 13,  4, 19, 10,  8, 12, 18, 19,
        9,  8, 21,  2,  4,  0,  2,  3,  1,  5,  0,  1,  3], dtype=int32),
  'id': 56377143,
  'response_time': 64.43975526033279,
  'responses': 621,
  'root_negative_count': 56,
  'root_neutral_count': 115,
  'root_positive_count': 91,
  'root_sent_list': None,
  'screen_name': 'KLM',
  'sent_list': None,
  'sentiment_score_max': 1.7362000000000002,
  'sentiment_score_mean': 0.06249030100334448,
  'sentiment_score_min': -1.178,
  'sentiment_score_sd': 0.34434805441807675},
 {'conv_amount': 90,
  'conv_average_size': 3.7111111111111112,
  'conv_total_tweets': 334,
  'delta_negative_count': 26,
  'delta_neutral_count': 78,
  'delta_positive_count': 35,
  'filter_type': 'BOTH',
  'hist_edges': array([-0.7356    , -0.66342333, -0.59124667, -0.51907   , -0.44689333,
       -0.37471667, -0.30254   , -0.23036333, -0.15818667, -0.08601   ,
       -0.01383333,  0.05834333,  0.13052   ,  0.20269667,  0.27487333,
        0.34705   ,  0.41922667,  0.49140333,  0.56358   ,  0.63575667,
        0.70793333,  0.78011   ,  0.85228667,  0.92446333,  0.99664   ,
        1.06881667,  1.14099333,  1.21317   ,  1.28534667,  1.35752333,
        1.4297    ]),
  'hist_freq': array([1, 4, 1, 2, 2, 4, 4, 2, 2, 4, 1, 6, 0, 1, 6, 3, 3, 1, 3, 3, 2, 1,
       0, 1, 3, 0, 0, 0, 0, 1], dtype=int32),
  'id': 106062176,
  'response_time': 66.4796687763713,
  'responses': 158,
  'root_negative_count': 22,
  'root_neutral_count': 30,
  'root_positive_count': 38,
  'root_sent_list': None,
  'screen_name': 'airfrance',
  'sent_list': None,
  'sentiment_score_max': 1.4297,
  'sentiment_score_mean': 0.05953741007194245,
  'sentiment_score_min': -0.7356,
  'sentiment_score_sd': 0.34163680750290104},
 {'conv_amount': 773,
  'conv_average_size': 3.7192755498059507,
  'conv_total_tweets': 2875,
  'delta_negative_count': 280,
  'delta_neutral_count': 674,
  'delta_positive_count': 380,
  'filter_type': 'BOTH',
  'hist_edges': array([-1.5204    , -1.41492667, -1.30945333, -1.20398   , -1.09850667,
       -0.99303333, -0.88756   , -0.78208667, -0.67661333, -0.57114   ,
       -0.46566667, -0.36019333, -0.25472   , -0.14924667, -0.04377333,
        0.0617    ,  0.16717333,  0.27264667,  0.37812   ,  0.48359333,
        0.58906667,  0.69454   ,  0.80001333,  0.90548667,  1.01096   ,
        1.11643333,  1.22190667,  1.32738   ,  1.43285333,  1.53832667,
        1.6438    ]),
  'hist_freq': array([ 2,  8,  7,  2,  5,  8, 17, 18, 16, 27, 49, 37, 34, 38, 47, 42, 35,
       43, 54, 37, 31, 30, 26, 16,  9,  8,  7,  4,  1,  2], dtype=int32),
  'id': 18332190,
  'response_time': 153.04654897959185,
  'responses': 1274,
  'root_negative_count': 274,
  'root_neutral_count': 159,
  'root_positive_count': 340,
  'root_sent_list': None,
  'screen_name': 'British_Airways',
  'sent_list': None,
  'sentiment_score_max': 1.6438000000000001,
  'sentiment_score_mean': 0.04313020989505248,
  'sentiment_score_min': -1.5204,
  'sentiment_score_sd': 0.4139180357199464},
 {'conv_amount': 1635,
  'conv_average_size': 3.308256880733945,
  'conv_total_tweets': 5409,
  'delta_negative_count': 465,
  'delta_neutral_count': 1049,
  'delta_positive_count': 669,
  'filter_type': 'BOTH',
  'hist_edges': array([-1.6415 , -1.53115, -1.4208 , -1.31045, -1.2001 , -1.08975,
       -0.9794 , -0.86905, -0.7587 , -0.64835, -0.538  , -0.42765,
       -0.3173 , -0.20695, -0.0966 ,  0.01375,  0.1241 ,  0.23445,
        0.3448 ,  0.45515,  0.5655 ,  0.67585,  0.7862 ,  0.89655,
        1.0069 ,  1.11725,  1.2276 ,  1.33795,  1.4483 ,  1.55865,
        1.669  ]),
  'hist_freq': array([  4,   1,   3,   7,   7,  16,  16,  28,  42,  36,  47,  64,  58,
        73,  66,  69,  77,  79, 102,  63,  50,  62,  50,  30,  32,  24,
         9,  10,   6,   3], dtype=int32),
  'id': 22536055,
  'response_time': 53.86653613184079,
  'responses': 2144,
  'root_negative_count': 671,
  'root_neutral_count': 334,
  'root_positive_count': 630,
  'root_sent_list': None,
  'screen_name': 'AmericanAir',
  'sent_list': None,
  'sentiment_score_max': 1.669,
  'sentiment_score_mean': 0.07067796610169493,
  'sentiment_score_min': -1.6415,
  'sentiment_score_sd': 0.437546583476482},
 {'conv_amount': 99,
  'conv_average_size': 3.3636363636363638,
  'conv_total_tweets': 333,
  'delta_negative_count': 40,
  'delta_neutral_count': 73,
  'delta_positive_count': 36,
  'filter_type': 'BOTH',
  'hist_edges': array([-1.3837    , -1.29554333, -1.20738667, -1.11923   , -1.03107333,
       -0.94291667, -0.85476   , -0.76660333, -0.67844667, -0.59029   ,
       -0.50213333, -0.41397667, -0.32582   , -0.23766333, -0.14950667,
       -0.06135   ,  0.02680667,  0.11496333,  0.20312   ,  0.29127667,
        0.37943333,  0.46759   ,  0.55574667,  0.64390333,  0.73206   ,
        0.82021667,  0.90837333,  0.99653   ,  1.08468667,  1.17284333,
        1.261     ]),
  'hist_freq': array([2, 0, 1, 1, 2, 3, 1, 1, 8, 1, 1, 2, 7, 5, 3, 2, 3, 7, 2, 6, 1, 6,
       1, 2, 1, 2, 2, 1, 1, 1], dtype=int32),
  'id': 124476322,
  'response_time': 31.230851291989666,
  'responses': 129,
  'root_negative_count': 28,
  'root_neutral_count': 24,
  'root_positive_count': 47,
  'root_sent_list': None,
  'screen_name': 'lufthansa',
  'sent_list': None,
  'sentiment_score_max': 1.261,
  'sentiment_score_mean': -0.027089261744966446,
  'sentiment_score_min': -1.3837,
  'sentiment_score_sd': 0.43564668017994124},
 {'conv_amount': 26,
  'conv_average_size': 3.5384615384615383,
  'conv_total_tweets': 92,
  'delta_negative_count': 5,
  'delta_neutral_count': 19,
  'delta_positive_count': 8,
  'filter_type': 'BOTH',
  'hist_edges': array([-1.0955    , -1.02752667, -0.95955333, -0.89158   , -0.82360667,
       -0.75563333, -0.68766   , -0.61968667, -0.55171333, -0.48374   ,
       -0.41576667, -0.34779333, -0.27982   , -0.21184667, -0.14387333,
       -0.0759    , -0.00792667,  0.06004667,  0.12802   ,  0.19599333,
        0.26396667,  0.33194   ,  0.39991333,  0.46788667,  0.53586   ,
        0.60383333,  0.67180667,  0.73978   ,  0.80775333,  0.87572667,
        0.9437    ]),
  'hist_freq': array([2, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 2, 0, 0,
       1, 0, 2, 0, 1, 0, 1, 1], dtype=int32),
  'id': 26223583,
  'response_time': 11.339773170731707,
  'responses': 41,
  'root_negative_count': 9,
  'root_neutral_count': 9,
  'root_positive_count': 8,
  'root_sent_list': None,
  'screen_name': 'airberlin',
  'sent_list': None,
  'sentiment_score_max': 0.9437,
  'sentiment_score_mean': 0.04145,
  'sentiment_score_min': -1.0955,
  'sentiment_score_sd': 0.42393693664270393},
 {'conv_amount': 7,
  'conv_average_size': 2.857142857142857,
  'conv_total_tweets': 20,
  'delta_negative_count': 2,
  'delta_neutral_count': 5,
  'delta_positive_count': 1,
  'filter_type': 'BOTH',
  'hist_edges': array([-5.0960e-01, -4.8128e-01, -4.5296e-01, -4.2464e-01, -3.9632e-01,
       -3.6800e-01, -3.3968e-01, -3.1136e-01, -2.8304e-01, -2.5472e-01,
       -2.2640e-01, -1.9808e-01, -1.6976e-01, -1.4144e-01, -1.1312e-01,
       -8.4800e-02, -5.6480e-02, -2.8160e-02,  1.6000e-04,  2.8480e-02,
        5.6800e-02,  8.5120e-02,  1.1344e-01,  1.4176e-01,  1.7008e-01,
        1.9840e-01,  2.2672e-01,  2.5504e-01,  2.8336e-01,  3.1168e-01,
        3.4000e-01]),
  'hist_freq': array([2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 1], dtype=int32),
  'id': 2182373406,
  'response_time': 13.13765833333333,
  'responses': 8,
  'root_negative_count': 2,
  'root_neutral_count': 1,
  'root_positive_count': 4,
  'root_sent_list': None,
  'screen_name': 'airberlinAssist',
  'sent_list': None,
  'sentiment_score_max': 0.34,
  'sentiment_score_mean': -0.0849,
  'sentiment_score_min': -0.5096,
  'sentiment_score_sd': 0.2686354965375946},
 {'conv_amount': 210,
  'conv_average_size': 3.052380952380952,
  'conv_total_tweets': 641,
  'delta_negative_count': 54,
  'delta_neutral_count': 178,
  'delta_positive_count': 71,
  'filter_type': 'BOTH',
  'hist_edges': array([-1.0748 , -0.98798, -0.90116, -0.81434, -0.72752, -0.6407 ,
       -0.55388, -0.46706, -0.38024, -0.29342, -0.2066 , -0.11978,
       -0.03296,  0.05386,  0.14068,  0.2275 ,  0.31432,  0.40114,
        0.48796,  0.57478,  0.6616 ,  0.74842,  0.83524,  0.92206,
        1.00888,  1.0957 ,  1.18252,  1.26934,  1.35616,  1.44298,
        1.5298 ]),
  'hist_freq': array([ 1,  1,  1,  2,  2,  4,  5,  8, 13,  8,  5,  4,  6, 12,  6,  6,  7,
        6,  6,  4,  5,  5,  3,  1,  0,  2,  0,  0,  1,  1], dtype=int32),
  'id': 38676903,
  'response_time': 632.9162892118862,
  'responses': 258,
  'root_negative_count': 86,
  'root_neutral_count': 54,
  'root_positive_count': 70,
  'root_sent_list': None,
  'screen_name': 'easyJet',
  'sent_list': None,
  'sentiment_score_max': 1.5297999999999998,
  'sentiment_score_mean': 0.03221155115511552,
  'sentiment_score_min': -1.0748,
  'sentiment_score_sd': 0.326646450052526},
 {'conv_amount': 166,
  'conv_average_size': 4.132530120481928,
  'conv_total_tweets': 686,
  'delta_negative_count': 61,
  'delta_neutral_count': 72,
  'delta_positive_count': 96,
  'filter_type': 'BOTH',
  'hist_edges': array([-1.0534    , -0.97222333, -0.89104667, -0.80987   , -0.72869333,
       -0.64751667, -0.56634   , -0.48516333, -0.40398667, -0.32281   ,
       -0.24163333, -0.16045667, -0.07928   ,  0.00189667,  0.08307333,
        0.16425   ,  0.24542667,  0.32660333,  0.40778   ,  0.48895667,
        0.57013333,  0.65131   ,  0.73248667,  0.81366333,  0.89484   ,
        0.97601667,  1.05719333,  1.13837   ,  1.21954667,  1.30072333,
        1.3819    ]),
  'hist_freq': array([ 1,  1,  0,  2,  5,  3,  4,  9,  8,  7,  6,  9,  6,  7, 12,  8, 10,
        9, 10, 11,  6,  5,  2,  6,  2,  4,  1,  1,  0,  2], dtype=int32),
  'id': 1542862735,
  'response_time': 19.51439969806763,
  'responses': 276,
  'root_negative_count': 42,
  'root_neutral_count': 45,
  'root_positive_count': 79,
  'root_sent_list': None,
  'screen_name': 'Ryanair',
  'sent_list': None,
  'sentiment_score_max': 1.3819,
  'sentiment_score_mean': 0.09700655021834062,
  'sentiment_score_min': -1.0534,
  'sentiment_score_sd': 0.41481490858579595},
 {'conv_amount': 45,
  'conv_average_size': 3.7777777777777777,
  'conv_total_tweets': 170,
  'delta_negative_count': 13,
  'delta_neutral_count': 28,
  'delta_positive_count': 28,
  'filter_type': 'BOTH',
  'hist_edges': array([-0.7783    , -0.70928333, -0.64026667, -0.57125   , -0.50223333,
       -0.43321667, -0.3642    , -0.29518333, -0.22616667, -0.15715   ,
       -0.08813333, -0.01911667,  0.0499    ,  0.11891667,  0.18793333,
        0.25695   ,  0.32596667,  0.39498333,  0.464     ,  0.53301667,
        0.60203333,  0.67105   ,  0.74006667,  0.80908333,  0.8781    ,
        0.94711667,  1.01613333,  1.08515   ,  1.15416667,  1.22318333,
        1.2922    ]),
  'hist_freq': array([2, 1, 0, 0, 1, 3, 2, 2, 0, 1, 0, 2, 0, 0, 3, 2, 2, 4, 2, 2, 1, 2,
       3, 0, 2, 1, 0, 1, 1, 1], dtype=int32),
  'id': 253340062,
  'response_time': 50.930351243781104,
  'responses': 67,
  'root_negative_count': 19,
  'root_neutral_count': 9,
  'root_positive_count': 17,
  'root_sent_list': None,
  'screen_name': 'SingaporeAir',
  'sent_list': None,
  'sentiment_score_max': 1.2922,
  'sentiment_score_mean': 0.16707391304347827,
  'sentiment_score_min': -0.7783,
  'sentiment_score_sd': 0.4430064077307293},
 {'conv_amount': 119,
  'conv_average_size': 3.0588235294117645,
  'conv_total_tweets': 364,
  'delta_negative_count': 36,
  'delta_neutral_count': 86,
  'delta_positive_count': 42,
  'filter_type': 'BOTH',
  'hist_edges': array([-1.6464 , -1.55062, -1.45484, -1.35906, -1.26328, -1.1675 ,
       -1.07172, -0.97594, -0.88016, -0.78438, -0.6886 , -0.59282,
       -0.49704, -0.40126, -0.30548, -0.2097 , -0.11392, -0.01814,
        0.07764,  0.17342,  0.2692 ,  0.36498,  0.46076,  0.55654,
        0.65232,  0.7481 ,  0.84388,  0.93966,  1.03544,  1.13122,
        1.227  ]),
  'hist_freq': array([1, 0, 0, 0, 0, 1, 0, 0, 3, 0, 2, 5, 1, 6, 8, 2, 7, 3, 7, 3, 4, 4,
       2, 4, 9, 2, 3, 0, 0, 1], dtype=int32),
  'id': 218730857,
  'response_time': 35.27883747276688,
  'responses': 153,
  'root_negative_count': 27,
  'root_neutral_count': 22,
  'root_positive_count': 70,
  'root_sent_list': None,
  'screen_name': 'Qantas',
  'sent_list': None,
  'sentiment_score_max': 1.2269999999999999,
  'sentiment_score_mean': 0.03343536585365854,
  'sentiment_score_min': -1.6464,
  'sentiment_score_sd': 0.37256686627613217},
 {'conv_amount': 49,
  'conv_average_size': 4.224489795918367,
  'conv_total_tweets': 207,
  'delta_negative_count': 35,
  'delta_neutral_count': 27,
  'delta_positive_count': 32,
  'filter_type': 'BOTH',
  'hist_edges': array([-1.2363    , -1.15557333, -1.07484667, -0.99412   , -0.91339333,
       -0.83266667, -0.75194   , -0.67121333, -0.59048667, -0.50976   ,
       -0.42903333, -0.34830667, -0.26758   , -0.18685333, -0.10612667,
       -0.0254    ,  0.05532667,  0.13605333,  0.21678   ,  0.29750667,
        0.37823333,  0.45896   ,  0.53968667,  0.62041333,  0.70114   ,
        0.78186667,  0.86259333,  0.94332   ,  1.02404667,  1.10477333,
        1.1855    ]),
  'hist_freq': array([1, 2, 1, 4, 1, 1, 1, 8, 0, 0, 1, 6, 2, 3, 3, 1, 0, 5, 5, 4, 1, 0,
       4, 2, 2, 6, 1, 1, 0, 1], dtype=int32),
  'id': 45621423,
  'response_time': 6.945998792270532,
  'responses': 69,
  'root_negative_count': 10,
  'root_neutral_count': 14,
  'root_positive_count': 25,
  'root_sent_list': None,
  'screen_name': 'EtihadAirways',
  'sent_list': None,
  'sentiment_score_max': 1.1855,
  'sentiment_score_mean': -0.019304255319148946,
  'sentiment_score_min': -1.2363,
  'sentiment_score_sd': 0.5253677548672289},
 {'conv_amount': 191,
  'conv_average_size': 3.931937172774869,
  'conv_total_tweets': 751,
  'delta_negative_count': 59,
  'delta_neutral_count': 109,
  'delta_positive_count': 96,
  'filter_type': 'BOTH',
  'hist_edges': array([-1.5078 , -1.40224, -1.29668, -1.19112, -1.08556, -0.98   ,
       -0.87444, -0.76888, -0.66332, -0.55776, -0.4522 , -0.34664,
       -0.24108, -0.13552, -0.02996,  0.0756 ,  0.18116,  0.28672,
        0.39228,  0.49784,  0.6034 ,  0.70896,  0.81452,  0.92008,
        1.02564,  1.1312 ,  1.23676,  1.34232,  1.44788,  1.55344,
        1.659  ]),
  'hist_freq': array([ 1,  0,  0,  1,  1,  0,  3,  3,  4,  9,  6,  9, 11,  8,  9,  8,  6,
       11, 12, 11,  5, 15, 10,  5,  2,  2,  1,  1,  0,  1], dtype=int32),
  'id': 20626359,
  'response_time': 24.22954349462366,
  'responses': 310,
  'root_negative_count': 61,
  'root_neutral_count': 50,
  'root_positive_count': 80,
  'root_sent_list': None,
  'screen_name': 'VirginAtlantic',
  'sent_list': None,
  'sentiment_score_max': 1.659,
  'sentiment_score_mean': 0.11749318181818182,
  'sentiment_score_min': -1.5078,
  'sentiment_score_sd': 0.446380423720379}]


year_data = {0: 0,
             1: 0,
             2: 0,
             3: 0,
             4: 0,
             5: 0,
             6: 0,
             7: 0,
             8: 0,
             9: 0,
             10: 0,
             11: 0,
             12: 0,
             13: 0,
             14: 0,
             15: 0,
             16: 0,
             17: 0,
             18: 0,
             19: 0,
             20: 0,
             21: 0,
             22: 0,
             23: 0,
             24: 0,
             25: 0,
             26: 0,
             27: 972,
             28: 1421,
             29: 1274,
             30: 1738,
             31: 1359,
             32: 1665,
             33: 1438,
             34: 1650,
             35: 1262,
             36: 1262,
             37: 1661,
             38: 1928,
             39: 1807,
             40: 2230,
             41: 1878,
             42: 1800,
             43: 1811,
             44: 1684,
             45: 1599,
             46: 1368,
             47: 1626,
             48: 2063,
             49: 1893,
             50: 1494,
             51: 1597,
             52: 1744,
             53: 1792,
             54: 1640,
             55: 1996,
             56: 1740,
             57: 1774,
             58: 2045,
             59: 1591,
             60: 1832,
             61: 2183,
             62: 2122,
             63: 1865,
             64: 1810,
             65: 2008,
             66: 1595,
             67: 1666,
             68: 2065,
             69: 2246,
             70: 2040,
             71: 2315,
             72: 3724,
             73: 2480,
             74: 1897,
             75: 2032,
             76: 1897,
             77: 1650,
             78: 1563,
             79: 1990,
             80: 1766,
             81: 1821,
             82: 1954,
             83: 2112,
             84: 1842,
             85: 1532,
             86: 2111,
             87: 1749,
             88: 1959,
             89: 0,
             90: 0,
             91: 0,
             92: 0,
             93: 0,
             94: 0,
             95: 0,
             96: 0,
             97: 0,
             98: 0,
             99: 0,
             100: 0,
             101: 0,
             102: 0,
             103: 0,
             104: 0,
             105: 0,
             106: 0,
             107: 0,
             108: 0,
             109: 0,
             110: 0,
             111: 0,
             112: 0,
             113: 0,
             114: 0,
             115: 0,
             116: 0,
             117: 0,
             118: 0,
             119: 0,
             120: 0,
             121: 0,
             122: 0,
             123: 0,
             124: 0,
             125: 0,
             126: 0,
             127: 0,
             128: 0,
             129: 0,
             130: 0,
             131: 0,
             132: 0,
             133: 0,
             134: 0,
             135: 0,
             136: 0,
             137: 0,
             138: 0,
             139: 0,
             140: 0,
             141: 0,
             142: 0,
             143: 0,
             144: 0,
             145: 0,
             146: 0,
             147: 0,
             148: 0,
             149: 0,
             150: 0,
             151: 0,
             152: 0,
             153: 5,
             154: 0,
             155: 0,
             156: 0,
             157: 0,
             158: 0,
             159: 0,
             160: 22,
             161: 0,
             162: 0,
             163: 4,
             164: 0,
             165: 0,
             166: 0,
             167: 0,
             168: 0,
             169: 0,
             170: 0,
             171: 0,
             172: 0,
             173: 0,
             174: 0,
             175: 4,
             176: 0,
             177: 28,
             178: 0,
             179: 10,
             180: 0,
             181: 0,
             182: 9,
             183: 0,
             184: 13,
             185: 0,
             186: 10,
             187: 17,
             188: 1592,
             189: 2261,
             190: 2753,
             191: 2893,
             192: 3251,
             193: 2801,
             194: 2534,
             195: 2719,
             196: 3358,
             197: 3563,
             198: 4109,
             199: 2622,
             200: 2992,
             201: 3483,
             202: 2468,
             203: 3067,
             204: 4045,
             205: 3114,
             206: 2929,
             207: 3244,
             208: 4067,
             209: 2801,
             210: 3472,
             211: 5669,
             212: 3962,
             213: 3560,
             214: 3750,
             215: 3130,
             216: 3417,
             217: 2920,
             218: 3421,
             219: 2696,
             220: 2945,
             221: 3189,
             222: 2987,
             223: 2784,
             224: 1300,
             225: 0,
             226: 0,
             227: 0,
             228: 0,
             229: 0,
             230: 0,
             231: 0,
             232: 0,
             233: 0,
             234: 0,
             235: 1669,
             236: 2973,
             237: 2304,
             238: 2305,
             239: 2547,
             240: 2065,
             241: 2001,
             242: 2165,
             243: 2084,
             244: 2248,
             245: 2388,
             246: 2941,
             247: 2144,
             248: 1477,
             249: 2351,
             250: 2583,
             251: 2066,
             252: 2207,
             253: 2636,
             254: 1996,
             255: 1582,
             256: 2053,
             257: 1662,
             258: 2116,
             259: 1931,
             260: 2138,
             261: 1804,
             262: 1871,
             263: 2633,
             264: 2151,
             265: 1589,
             266: 580,
             267: 2066,
             268: 1634,
             269: 2000,
             270: 2455,
             271: 2008,
             272: 1784,
             273: 2372,
             274: 2431,
             275: 2011,
             276: 1777,
             277: 2061,
             278: 2086,
             279: 3061,
             280: 2853,
             281: 2376,
             282: 2070,
             283: 1591,
             284: 2247,
             285: 1779,
             286: 1598,
             287: 1843,
             288: 1741,
             289: 1648,
             290: 1842,
             291: 2156,
             292: 2038,
             293: 1833,
             294: 1994,
             295: 2157,
             296: 2046,
             297: 1955,
             298: 2020,
             299: 1826,
             300: 1739,
             301: 1919,
             302: 2368,
             303: 2163,
             304: 1866,
             305: 1924,
             306: 1733,
             307: 1642,
             308: 2213,
             309: 2028,
             310: 2433,
             311: 1383,
             312: 452,
             313: 0,
             314: 0,
             315: 0,
             316: 0,
             317: 0,
             318: 0,
             319: 0,
             320: 884,
             321: 1740,
             322: 1949,
             323: 1849,
             324: 2000,
             325: 1564,
             326: 1793,
             327: 1511,
             328: 1913,
             329: 1648,
             330: 891,
             331: 1468,
             332: 2024,
             333: 2421,
             334: 2000,
             335: 1755,
             336: 1709,
             337: 1710,
             338: 1681,
             339: 1857,
             340: 2018,
             341: 1577,
             342: 1668,
             343: 1637,
             344: 2336,
             345: 1991,
             346: 2087,
             347: 2455,
             348: 1996,
             349: 1665,
             350: 2359,
             351: 2772,
             352: 3892,
             353: 4066,
             354: 2773,
             355: 2648,
             356: 3003,
             357: 3550,
             358: 2996,
             359: 3355,
             360: 1829,
             361: 2508,
             362: 2802,
             363: 2470,
             364: 937}

airlines_abv = ['KLM', 'A.F.', 'B.A.', 'A.A.', 'LU', 'A.B.', 'ABA',
                'EJ', 'RY', 'S.A.', 'QA', 'E.A.', 'V.A.']

food_dataset = [{'conv_amount': 2369,
                 'conv_average_size': 3.10510764035458,
                 'conv_total_tweets': 7356,
                 'hist_edges': array([-1.6531, -1.31775, -0.9824, -0.64705, -0.3117, 0.02365,
                                      0.359, 0.69435, 1.0297, 1.36505, 1.7004]),
                 'hist_freq': array([15, 44, 168, 343, 3057, 371, 355, 188, 82, 20],
                                    dtype=int32),
                 'id': 56377143,
                 'negative_count': 923,
                 'neutral_count': 2684,
                 'positive_count': 1036,
                 'response_time': 108.66477653923673,
                 'responses': 5127,
                 'screen_name': 'KLM',
                 'sentiment_score_max': 1.7004000000000001,
                 'sentiment_score_mean': 0.024280335989661856,
                 'sentiment_score_min': -1.6531,
                 'sentiment_score_sd': 0.38267921353620044},
                {'conv_amount': 698,
                 'conv_average_size': 3.21919770773639,
                 'conv_total_tweets': 2247,
                 'hist_edges': array([-1.5213, -1.21233, -0.90336, -0.59439, -0.28542, 0.02355,
                                      0.33252, 0.64149, 0.95046, 1.25943, 1.5684]),
                 'hist_freq': array([6, 18, 62, 98, 763, 111, 142, 66, 32, 11], dtype=int32),
                 'id': 106062176,
                 'negative_count': 294,
                 'neutral_count': 646,
                 'positive_count': 369,
                 'response_time': 76.94872963627662,
                 'responses': 1393,
                 'screen_name': 'airfrance',
                 'sentiment_score_max': 1.5684,
                 'sentiment_score_mean': 0.04937043544690604,
                 'sentiment_score_min': -1.5213,
                 'sentiment_score_sd': 0.41116937774251144},
                {'conv_amount': 13961,
                 'conv_average_size': 3.295036172193969,
                 'conv_total_tweets': 46002,
                 'hist_edges': array([-1.8332, -1.47204, -1.11088, -0.74972, -0.38856, -0.0274,
                                      0.33376, 0.69492, 1.05608, 1.41724, 1.7784]),
                 'hist_freq': array([80, 383, 1088, 2182, 2900, 15610, 2923, 1675, 697,
                                     107], dtype=int32),
                 'id': 18332190,
                 'negative_count': 6832,
                 'neutral_count': 12411,
                 'positive_count': 8402,
                 'response_time': 353.5165627280912,
                 'responses': 26287,
                 'screen_name': 'British_Airways',
                 'sentiment_score_max': 1.7784,
                 'sentiment_score_mean': 0.03636903237475131,
                 'sentiment_score_min': -1.8332,
                 'sentiment_score_sd': 0.4597333205298218},
                {'conv_amount': 17225,
                 'conv_average_size': 2.523947750362845,
                 'conv_total_tweets': 43475,
                 'hist_edges': array([-1.7847, -1.42901, -1.07332, -0.71763, -0.36194, -0.00625,
                                      0.34944, 0.70513, 1.06082, 1.41651, 1.7722]),
                 'hist_freq': array([82, 383, 1117, 1982, 2565, 13751, 2363, 1319, 553,
                                     122], dtype=int32),
                 'id': 22536055,
                 'negative_count': 6161,
                 'neutral_count': 11369,
                 'positive_count': 6707,
                 'response_time': 37.0685238869642,
                 'responses': 24535,
                 'screen_name': 'AmericanAir',
                 'sentiment_score_max': 1.7722,
                 'sentiment_score_mean': 0.02204281057886702,
                 'sentiment_score_min': -1.7847,
                 'sentiment_score_sd': 0.4588309934779562},
                {'conv_amount': 774,
                 'conv_average_size': 2.4754521963824287,
                 'conv_total_tweets': 1916,
                 'hist_edges': array([-1.6317, -1.32984, -1.02798, -0.72612, -0.42426, -0.1224,
                                      0.17946, 0.48132, 0.78318, 1.08504, 1.3869]),
                 'hist_freq': array([6, 16, 61, 64, 124, 672, 103, 66, 40, 17], dtype=int32),
                 'id': 124476322,
                 'negative_count': 321,
                 'neutral_count': 538,
                 'positive_count': 310,
                 'response_time': 64.34324674873737,
                 'responses': 1056,
                 'screen_name': 'lufthansa',
                 'sentiment_score_max': 1.3869,
                 'sentiment_score_mean': -0.010377673224978613,
                 'sentiment_score_min': -1.6317,
                 'sentiment_score_sd': 0.41841926669741486},
                {'conv_amount': 162,
                 'conv_average_size': 3.253086419753086,
                 'conv_total_tweets': 527,
                 'hist_edges': array([-1.1769, -0.89253, -0.60816, -0.32379, -0.03942, 0.24495,
                                      0.52932, 0.81369, 1.09806, 1.38243, 1.6668]),
                 'hist_freq': array([7, 19, 26, 35, 164, 19, 22, 9, 4, 2], dtype=int32),
                 'id': 26223583,
                 'negative_count': 90,
                 'neutral_count': 143,
                 'positive_count': 74,
                 'response_time': 98.98145500588929,
                 'responses': 283,
                 'screen_name': 'airberlin',
                 'sentiment_score_max': 1.6667999999999998,
                 'sentiment_score_mean': 0.0016032573289902236,
                 'sentiment_score_min': -1.1769,
                 'sentiment_score_sd': 0.42580228875607395},
                {'conv_amount': 77,
                 'conv_average_size': 3.948051948051948,
                 'conv_total_tweets': 304,
                 'hist_edges': array([-1.0957, -0.81858, -0.54146, -0.26434, 0.01278, 0.2899,
                                      0.56702, 0.84414, 1.12126, 1.39838, 1.6755]),
                 'hist_freq': array([5, 4, 15, 65, 6, 17, 21, 6, 5, 28], dtype=int32),
                 'id': 2182373406,
                 'negative_count': 36,
                 'neutral_count': 53,
                 'positive_count': 83,
                 'response_time': 44.67232199074074,
                 'responses': 144,
                 'screen_name': 'airberlinAssist',
                 'sentiment_score_max': 1.6755,
                 'sentiment_score_mean': 0.372718023255814,
                 'sentiment_score_min': -1.0957000000000001,
                 'sentiment_score_sd': 0.6861696177946562},
                {'conv_amount': 2052,
                 'conv_average_size': 2.259746588693957,
                 'conv_total_tweets': 4637,
                 'hist_edges': array([-1.5534, -1.22201, -0.89062, -0.55923, -0.22784, 0.10355,
                                      0.43494, 0.76633, 1.09772, 1.42911, 1.7605]),
                 'hist_freq': array([27, 103, 176, 227, 1873, 273, 228, 113, 54, 11],
                                    dtype=int32),
                 'id': 38676903,
                 'negative_count': 706,
                 'neutral_count': 1604,
                 'positive_count': 775,
                 'response_time': 1531.3890646798704,
                 'responses': 2676,
                 'screen_name': 'easyJet',
                 'sentiment_score_max': 1.7605,
                 'sentiment_score_mean': 0.00768606158833063,
                 'sentiment_score_min': -1.5534,
                 'sentiment_score_sd': 0.4388696842871147},
                {'conv_amount': 911,
                 'conv_average_size': 4.013172338090011,
                 'conv_total_tweets': 3656,
                 'hist_edges': array([-1.3041, -1.01481, -0.72552, -0.43623, -0.14694, 0.14235,
                                      0.43164, 0.72093, 1.01022, 1.29951, 1.5888]),
                 'hist_freq': array([19, 62, 141, 194, 839, 232, 196, 93, 28, 10], dtype=int32),
                 'id': 1542862735,
                 'negative_count': 498,
                 'neutral_count': 686,
                 'positive_count': 630,
                 'response_time': 46.11101643356644,
                 'responses': 1573,
                 'screen_name': 'Ryanair',
                 'sentiment_score_max': 1.5888,
                 'sentiment_score_mean': 0.049229382579933846,
                 'sentiment_score_min': -1.3041,
                 'sentiment_score_sd': 0.42819787249187113},
                {'conv_amount': 704,
                 'conv_average_size': 3.1548295454545454,
                 'conv_total_tweets': 2221,
                 'hist_edges': array([-1.5822, -1.2592, -0.9362, -0.6132, -0.2902, 0.0328, 0.3558,
                                      0.6788, 1.0018, 1.3248, 1.6478]),
                 'hist_freq': array([7, 25, 125, 142, 686, 127, 119, 72, 23, 18], dtype=int32),
                 'id': 253340062,
                 'negative_count': 438,
                 'neutral_count': 532,
                 'positive_count': 374,
                 'response_time': 54.27973770973155,
                 'responses': 1192,
                 'screen_name': 'SingaporeAir',
                 'sentiment_score_max': 1.6478000000000002,
                 'sentiment_score_mean': -0.017613095238095247,
                 'sentiment_score_min': -1.5822,
                 'sentiment_score_sd': 0.47344601048418994},
                {'conv_amount': 1971,
                 'conv_average_size': 1.9812278031456114,
                 'conv_total_tweets': 3905,
                 'hist_edges': array([-1.5737, -1.23941, -0.90512, -0.57083, -0.23654, 0.09775,
                                      0.43204, 0.76633, 1.10062, 1.43491, 1.7692]),
                 'hist_freq': array([14, 49, 141, 187, 1747, 188, 174, 108, 32, 14],
                                    dtype=int32),
                 'id': 218730857,
                 'negative_count': 568,
                 'neutral_count': 1514,
                 'positive_count': 572,
                 'response_time': 234.81280398504725,
                 'responses': 2363,
                 'screen_name': 'Qantas',
                 'sentiment_score_max': 1.7692,
                 'sentiment_score_mean': 0.019193820648078373,
                 'sentiment_score_min': -1.5737,
                 'sentiment_score_sd': 0.4074210357927381},
                {'conv_amount': 636,
                 'conv_average_size': 5.366352201257862,
                 'conv_total_tweets': 3413,
                 'hist_edges': array([-1.6333, -1.32513, -1.01696, -0.70879, -0.40062, -0.09245,
                                      0.21572, 0.52389, 0.83206, 1.14023, 1.4484]),
                 'hist_freq': array([17, 23, 340, 194, 255, 643, 137, 84, 40, 17], dtype=int32),
                 'id': 45621423,
                 'negative_count': 919,
                 'neutral_count': 401,
                 'positive_count': 430,
                 'response_time': 9.8468963783655,
                 'responses': 1399,
                 'screen_name': 'EtihadAirways',
                 'sentiment_score_max': 1.4484,
                 'sentiment_score_mean': -0.18732491428571432,
                 'sentiment_score_min': -1.6333,
                 'sentiment_score_sd': 0.5072391766154938},
                {'conv_amount': 2548,
                 'conv_average_size': 3.1981946624803768,
                 'conv_total_tweets': 8149,
                 'hist_edges': array([-1.6806, -1.33823, -0.99586, -0.65349, -0.31112, 0.03125,
                                      0.37362, 0.71599, 1.05836, 1.40073, 1.7431]),
                 'hist_freq': array([13, 49, 212, 310, 1896, 483, 541, 303, 109, 27],
                                    dtype=int32),
                 'id': 20626359,
                 'negative_count': 1019,
                 'neutral_count': 1424,
                 'positive_count': 1500,
                 'response_time': 25.79680992675705,
                 'responses': 4278,
                 'screen_name': 'VirginAtlantic',
                 'sentiment_score_max': 1.7431,
                 'sentiment_score_mean': 0.09148102967283794,
                 'sentiment_score_min': -1.6806,
                 'sentiment_score_sd': 0.47999559685005433}]


def average_conv_length_sentiment_correlation():
    frames = []
    for entry in dataset:
        frames.append({"average_conv_length": entry['conv_average_size'],
                       "sentiment_score": entry['sentiment_score_mean']
                       })
    dataframe = pd.DataFrame(frames)
    ax = sns.regplot(x="average_conv_length", y="sentiment_score", data=dataframe)
    plt.show()


def responses_sentiment_correlation():
    frames = []
    for entry in dataset:
        frames.append({"responses": entry['responses'],
                       "sentiment_score": entry['sentiment_score_mean']})
    dataframe = pd.DataFrame(frames)
    ax = sns.regplot(x="responses", y="sentiment_score", data=dataframe)
    plt.show()


def food_distribution():
    frames = []
    for entry in food_dataset:
        if entry['id'] == 22536055:  # american air
            frq = entry['hist_freq']
            edges = entry['hist_edges']
            fig, ax = plt.subplots()
            ax.bar(edges[:-1], frq, width=np.diff(edges), ec="k", align="edge")
            plt.show()


def conversation_length_through_year_chart():
    print(list(year_data.values()))

    date_list = []

    year_data2 = sorted_over_year(22536055)

    for x in year_data2.keys(): # year_data
        vals = (date(2016, 1, 1) + timedelta(days=x)).strftime("%d %b")
        print(vals)
        date_list.append(vals)

    # b= plt.bar(range(len(year_data)), date_list, align='center')

    ax = plt.subplot(111)
    ax.bar(date_list, list(year_data2.values()))
    # ax.xaxis_date()

    plt.title("Conversations throughout the year")

    # # for python 2.x:
    # plt.bar(range(len(D)), D.values(), align='center')  # python 2.x
    plt.xticks(rotation=90, fontsize=10)
    ax.xaxis.set_major_locator(ticker.MultipleLocator(30))

    # plt.show()

    plt.savefig("year_conversation.svg", bbox_inches='tight')


def stacked_sentiment_bars(show_deltas=True):
    if show_deltas:
        delta_string = "delta_"
        sign_string = "Î” "
    else:
        delta_string = "root_"
        sign_string = ""

    frames = []

    columns = []
    for entry in dataset:
        columns.append(entry["screen_name"])

    for i, entry in enumerate(dataset):
        total = entry[delta_string + 'negative_count'] + entry[delta_string + 'neutral_count'] + entry[
            delta_string + 'positive_count']

        frame = {
            "abv": airlines_abv[i],
            "screen_name": entry['screen_name'],
            sign_string + "negative": entry[delta_string + 'negative_count'] * 100 / total,
            sign_string + "neutral": entry[delta_string + 'neutral_count'] * 100 / total,
            sign_string + "positive": entry[delta_string + 'positive_count'] * 100 / total
        }
        pprint.pprint(frame)
        frames.append(frame)

    frames = sorted(frames, reverse=True, key=lambda l: l["abv"])

    df = pd.DataFrame(frames)

    pprint.pprint(df)
    pl = df.plot.barh(stacked=True, x="abv", color=["red", "orange", "green"])
    if show_deltas:
        plt.savefig("stacked_delta.svg", bbox_inches='tight')
    else:
        plt.savefig("stacked_root.svg", bbox_inches='tight')

# The following functions are no longer used in the project andcould also be omitted.
# responses_sentiment_correlation() unused in the poster
# food_distribution() unused in the poster

#conversation_length_through_year_chart() # shows the conversations graph throughout the year named: year_conversation.svg
stacked_sentiment_bars(show_deltas=False)  # shows the stacked barchart with negative/neutral/positive distribution named: stacked_root.svg
# stacked_sentiment_bars(show_deltas=True)  # same but then for deltas named: stacked_delta.svg
