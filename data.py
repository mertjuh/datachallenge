import pprint

from matplotlib.colors import ListedColormap
from numpy import int32, array, polyfit
import numpy as np
from numpy.polynomial.polynomial import polyfit
import matplotlib.pyplot as plt
import seaborn as sns
import pandas as pd

food_dataset = [{'conv_amount': 2369,
                 'conv_average_size': 3.10510764035458,
                 'conv_total_tweets': 7356,
                 'hist_edges': array([-1.6531, -1.31775, -0.9824, -0.64705, -0.3117, 0.02365,
                                      0.359, 0.69435, 1.0297, 1.36505, 1.7004]),
                 'hist_freq': array([15, 44, 168, 343, 3057, 371, 355, 188, 82, 20],
                                    dtype=int32),
                 'id': 56377143,
                 'negative_count': 923,
                 'neutral_count': 2684,
                 'positive_count': 1036,
                 'response_time': 108.66477653923673,
                 'responses': 5127,
                 'screen_name': 'KLM',
                 'sentiment_score_max': 1.7004000000000001,
                 'sentiment_score_mean': 0.024280335989661856,
                 'sentiment_score_min': -1.6531,
                 'sentiment_score_sd': 0.38267921353620044},
                {'conv_amount': 698,
                 'conv_average_size': 3.21919770773639,
                 'conv_total_tweets': 2247,
                 'hist_edges': array([-1.5213, -1.21233, -0.90336, -0.59439, -0.28542, 0.02355,
                                      0.33252, 0.64149, 0.95046, 1.25943, 1.5684]),
                 'hist_freq': array([6, 18, 62, 98, 763, 111, 142, 66, 32, 11], dtype=int32),
                 'id': 106062176,
                 'negative_count': 294,
                 'neutral_count': 646,
                 'positive_count': 369,
                 'response_time': 76.94872963627662,
                 'responses': 1393,
                 'screen_name': 'airfrance',
                 'sentiment_score_max': 1.5684,
                 'sentiment_score_mean': 0.04937043544690604,
                 'sentiment_score_min': -1.5213,
                 'sentiment_score_sd': 0.41116937774251144},
                {'conv_amount': 13961,
                 'conv_average_size': 3.295036172193969,
                 'conv_total_tweets': 46002,
                 'hist_edges': array([-1.8332, -1.47204, -1.11088, -0.74972, -0.38856, -0.0274,
                                      0.33376, 0.69492, 1.05608, 1.41724, 1.7784]),
                 'hist_freq': array([80, 383, 1088, 2182, 2900, 15610, 2923, 1675, 697,
                                     107], dtype=int32),
                 'id': 18332190,
                 'negative_count': 6832,
                 'neutral_count': 12411,
                 'positive_count': 8402,
                 'response_time': 353.5165627280912,
                 'responses': 26287,
                 'screen_name': 'British_Airways',
                 'sentiment_score_max': 1.7784,
                 'sentiment_score_mean': 0.03636903237475131,
                 'sentiment_score_min': -1.8332,
                 'sentiment_score_sd': 0.4597333205298218},
                {'conv_amount': 17225,
                 'conv_average_size': 2.523947750362845,
                 'conv_total_tweets': 43475,
                 'hist_edges': array([-1.7847, -1.42901, -1.07332, -0.71763, -0.36194, -0.00625,
                                      0.34944, 0.70513, 1.06082, 1.41651, 1.7722]),
                 'hist_freq': array([82, 383, 1117, 1982, 2565, 13751, 2363, 1319, 553,
                                     122], dtype=int32),
                 'id': 22536055,
                 'negative_count': 6161,
                 'neutral_count': 11369,
                 'positive_count': 6707,
                 'response_time': 37.0685238869642,
                 'responses': 24535,
                 'screen_name': 'AmericanAir',
                 'sentiment_score_max': 1.7722,
                 'sentiment_score_mean': 0.02204281057886702,
                 'sentiment_score_min': -1.7847,
                 'sentiment_score_sd': 0.4588309934779562},
                {'conv_amount': 774,
                 'conv_average_size': 2.4754521963824287,
                 'conv_total_tweets': 1916,
                 'hist_edges': array([-1.6317, -1.32984, -1.02798, -0.72612, -0.42426, -0.1224,
                                      0.17946, 0.48132, 0.78318, 1.08504, 1.3869]),
                 'hist_freq': array([6, 16, 61, 64, 124, 672, 103, 66, 40, 17], dtype=int32),
                 'id': 124476322,
                 'negative_count': 321,
                 'neutral_count': 538,
                 'positive_count': 310,
                 'response_time': 64.34324674873737,
                 'responses': 1056,
                 'screen_name': 'lufthansa',
                 'sentiment_score_max': 1.3869,
                 'sentiment_score_mean': -0.010377673224978613,
                 'sentiment_score_min': -1.6317,
                 'sentiment_score_sd': 0.41841926669741486},
                {'conv_amount': 162,
                 'conv_average_size': 3.253086419753086,
                 'conv_total_tweets': 527,
                 'hist_edges': array([-1.1769, -0.89253, -0.60816, -0.32379, -0.03942, 0.24495,
                                      0.52932, 0.81369, 1.09806, 1.38243, 1.6668]),
                 'hist_freq': array([7, 19, 26, 35, 164, 19, 22, 9, 4, 2], dtype=int32),
                 'id': 26223583,
                 'negative_count': 90,
                 'neutral_count': 143,
                 'positive_count': 74,
                 'response_time': 98.98145500588929,
                 'responses': 283,
                 'screen_name': 'airberlin',
                 'sentiment_score_max': 1.6667999999999998,
                 'sentiment_score_mean': 0.0016032573289902236,
                 'sentiment_score_min': -1.1769,
                 'sentiment_score_sd': 0.42580228875607395},
                {'conv_amount': 77,
                 'conv_average_size': 3.948051948051948,
                 'conv_total_tweets': 304,
                 'hist_edges': array([-1.0957, -0.81858, -0.54146, -0.26434, 0.01278, 0.2899,
                                      0.56702, 0.84414, 1.12126, 1.39838, 1.6755]),
                 'hist_freq': array([5, 4, 15, 65, 6, 17, 21, 6, 5, 28], dtype=int32),
                 'id': 2182373406,
                 'negative_count': 36,
                 'neutral_count': 53,
                 'positive_count': 83,
                 'response_time': 44.67232199074074,
                 'responses': 144,
                 'screen_name': 'airberlinAssist',
                 'sentiment_score_max': 1.6755,
                 'sentiment_score_mean': 0.372718023255814,
                 'sentiment_score_min': -1.0957000000000001,
                 'sentiment_score_sd': 0.6861696177946562},
                {'conv_amount': 2052,
                 'conv_average_size': 2.259746588693957,
                 'conv_total_tweets': 4637,
                 'hist_edges': array([-1.5534, -1.22201, -0.89062, -0.55923, -0.22784, 0.10355,
                                      0.43494, 0.76633, 1.09772, 1.42911, 1.7605]),
                 'hist_freq': array([27, 103, 176, 227, 1873, 273, 228, 113, 54, 11],
                                    dtype=int32),
                 'id': 38676903,
                 'negative_count': 706,
                 'neutral_count': 1604,
                 'positive_count': 775,
                 'response_time': 1531.3890646798704,
                 'responses': 2676,
                 'screen_name': 'easyJet',
                 'sentiment_score_max': 1.7605,
                 'sentiment_score_mean': 0.00768606158833063,
                 'sentiment_score_min': -1.5534,
                 'sentiment_score_sd': 0.4388696842871147},
                {'conv_amount': 911,
                 'conv_average_size': 4.013172338090011,
                 'conv_total_tweets': 3656,
                 'hist_edges': array([-1.3041, -1.01481, -0.72552, -0.43623, -0.14694, 0.14235,
                                      0.43164, 0.72093, 1.01022, 1.29951, 1.5888]),
                 'hist_freq': array([19, 62, 141, 194, 839, 232, 196, 93, 28, 10], dtype=int32),
                 'id': 1542862735,
                 'negative_count': 498,
                 'neutral_count': 686,
                 'positive_count': 630,
                 'response_time': 46.11101643356644,
                 'responses': 1573,
                 'screen_name': 'Ryanair',
                 'sentiment_score_max': 1.5888,
                 'sentiment_score_mean': 0.049229382579933846,
                 'sentiment_score_min': -1.3041,
                 'sentiment_score_sd': 0.42819787249187113},
                {'conv_amount': 704,
                 'conv_average_size': 3.1548295454545454,
                 'conv_total_tweets': 2221,
                 'hist_edges': array([-1.5822, -1.2592, -0.9362, -0.6132, -0.2902, 0.0328, 0.3558,
                                      0.6788, 1.0018, 1.3248, 1.6478]),
                 'hist_freq': array([7, 25, 125, 142, 686, 127, 119, 72, 23, 18], dtype=int32),
                 'id': 253340062,
                 'negative_count': 438,
                 'neutral_count': 532,
                 'positive_count': 374,
                 'response_time': 54.27973770973155,
                 'responses': 1192,
                 'screen_name': 'SingaporeAir',
                 'sentiment_score_max': 1.6478000000000002,
                 'sentiment_score_mean': -0.017613095238095247,
                 'sentiment_score_min': -1.5822,
                 'sentiment_score_sd': 0.47344601048418994},
                {'conv_amount': 1971,
                 'conv_average_size': 1.9812278031456114,
                 'conv_total_tweets': 3905,
                 'hist_edges': array([-1.5737, -1.23941, -0.90512, -0.57083, -0.23654, 0.09775,
                                      0.43204, 0.76633, 1.10062, 1.43491, 1.7692]),
                 'hist_freq': array([14, 49, 141, 187, 1747, 188, 174, 108, 32, 14],
                                    dtype=int32),
                 'id': 218730857,
                 'negative_count': 568,
                 'neutral_count': 1514,
                 'positive_count': 572,
                 'response_time': 234.81280398504725,
                 'responses': 2363,
                 'screen_name': 'Qantas',
                 'sentiment_score_max': 1.7692,
                 'sentiment_score_mean': 0.019193820648078373,
                 'sentiment_score_min': -1.5737,
                 'sentiment_score_sd': 0.4074210357927381},
                {'conv_amount': 636,
                 'conv_average_size': 5.366352201257862,
                 'conv_total_tweets': 3413,
                 'hist_edges': array([-1.6333, -1.32513, -1.01696, -0.70879, -0.40062, -0.09245,
                                      0.21572, 0.52389, 0.83206, 1.14023, 1.4484]),
                 'hist_freq': array([17, 23, 340, 194, 255, 643, 137, 84, 40, 17], dtype=int32),
                 'id': 45621423,
                 'negative_count': 919,
                 'neutral_count': 401,
                 'positive_count': 430,
                 'response_time': 9.8468963783655,
                 'responses': 1399,
                 'screen_name': 'EtihadAirways',
                 'sentiment_score_max': 1.4484,
                 'sentiment_score_mean': -0.18732491428571432,
                 'sentiment_score_min': -1.6333,
                 'sentiment_score_sd': 0.5072391766154938},
                {'conv_amount': 2548,
                 'conv_average_size': 3.1981946624803768,
                 'conv_total_tweets': 8149,
                 'hist_edges': array([-1.6806, -1.33823, -0.99586, -0.65349, -0.31112, 0.03125,
                                      0.37362, 0.71599, 1.05836, 1.40073, 1.7431]),
                 'hist_freq': array([13, 49, 212, 310, 1896, 483, 541, 303, 109, 27],
                                    dtype=int32),
                 'id': 20626359,
                 'negative_count': 1019,
                 'neutral_count': 1424,
                 'positive_count': 1500,
                 'response_time': 25.79680992675705,
                 'responses': 4278,
                 'screen_name': 'VirginAtlantic',
                 'sentiment_score_max': 1.7431,
                 'sentiment_score_mean': 0.09148102967283794,
                 'sentiment_score_min': -1.6806,
                 'sentiment_score_sd': 0.47999559685005433}]

dataset = [{'conv_amount': 33482,
            'conv_average_size': 3.524281703601935,
            'conv_total_tweets': 118000,
            'hist_edges': array([-1.7396, -1.39063, -1.04166, -0.69269, -0.34372, 0.00525,
                                 0.35422, 0.70319, 1.05216, 1.40113, 1.7501]),
            'hist_freq': array([72, 356, 1337, 4361, 51694, 4964, 5873, 2304, 726,
                                131], dtype=int32),
            'id': 56377143,
            'negative_count': 10186,
            'neutral_count': 47606,
            'positive_count': 14026,
            'response_time': 106.36490344469313,
            'responses': 79083,
            'screen_name': 'KLM',
            'sentiment_score_max': 1.7501,
            'sentiment_score_mean': 0.034255278620958535,
            'sentiment_score_min': -1.7396,
            'sentiment_score_sd': 0.3273098833069863},
           {'conv_amount': 8338,
            'conv_average_size': 3.472895178699928,
            'conv_total_tweets': 28957,
            'hist_edges': array([-1.6173, -1.2817, -0.9461, -0.6105, -0.2749, 0.0607, 0.3963,
                                 0.7319, 1.0675, 1.4031, 1.7387]),
            'hist_freq': array([48, 145, 599, 1220, 9595, 1793, 1738, 787, 348, 81],
                               dtype=int32),
            'id': 106062176,
            'negative_count': 3095,
            'neutral_count': 8300,
            'positive_count': 4959,
            'response_time': 160.92604251131309,
            'responses': 17384,
            'screen_name': 'airfrance',
            'sentiment_score_max': 1.7387000000000001,
            'sentiment_score_mean': 0.08079059557294853,
            'sentiment_score_min': -1.6173,
            'sentiment_score_sd': 0.4061318389948296},
           {'conv_amount': 76582,
            'conv_average_size': 3.2169439293828836,
            'conv_total_tweets': 246360,
            'hist_edges': array([-1.8332, -1.47103, -1.10886, -0.74669, -0.38452, -0.02235,
                                 0.33982, 0.70199, 1.06416, 1.42633, 1.7885]),
            'hist_freq': array([171, 1391, 4422, 10692, 15432, 86441, 18323, 9384, 3825,
                                616], dtype=int32),
            'id': 18332190,
            'negative_count': 32928,
            'neutral_count': 69124,
            'positive_count': 48645,
            'response_time': 355.69372027654833,
            'responses': 140988,
            'screen_name': 'British_Airways',
            'sentiment_score_max': 1.7885,
            'sentiment_score_mean': 0.07269054592991235,
            'sentiment_score_min': -1.8332,
            'sentiment_score_sd': 0.4397168850121808},
           {'conv_amount': 134632,
            'conv_average_size': 2.586495038326698,
            'conv_total_tweets': 348225,
            'hist_edges': array([-1.7847, -1.42312, -1.06154, -0.69996, -0.33838, 0.0232,
                                 0.38478, 0.74636, 1.10794, 1.46952, 1.8311]),
            'hist_freq': array([368, 2312, 7001, 15991, 106652, 22667, 20710, 11050,
                                4401, 744], dtype=int32),
            'id': 22536055,
            'negative_count': 43612,
            'neutral_count': 87720,
            'positive_count': 60564,
            'response_time': 37.20039019254067,
            'responses': 192877,
            'screen_name': 'AmericanAir',
            'sentiment_score_max': 1.8311000000000002,
            'sentiment_score_mean': 0.06536200441906033,
            'sentiment_score_min': -1.7847,
            'sentiment_score_sd': 0.45071342059854713},
           {'conv_amount': 7403,
            'conv_average_size': 3.0334999324598138,
            'conv_total_tweets': 22457,
            'hist_edges': array([-1.6317, -1.28806, -0.94442, -0.60078, -0.25714, 0.0865,
                                 0.43014, 0.77378, 1.11742, 1.46106, 1.8047]),
            'hist_freq': array([40, 154, 542, 1146, 6402, 1728, 1458, 845, 361, 273],
                               dtype=int32),
            'id': 124476322,
            'negative_count': 2848,
            'neutral_count': 5092,
            'positive_count': 5009,
            'response_time': 64.39031627549345,
            'responses': 11163,
            'screen_name': 'lufthansa',
            'sentiment_score_max': 1.8047,
            'sentiment_score_mean': 0.13467202872808712,
            'sentiment_score_min': -1.6317,
            'sentiment_score_sd': 0.4989857213561239},
           {'conv_amount': 3834,
            'conv_average_size': 3.7548252477829944,
            'conv_total_tweets': 14396,
            'hist_edges': array([-1.6852, -1.33798, -0.99076, -0.64354, -0.29632, 0.0509,
                                 0.39812, 0.74534, 1.09256, 1.43978, 1.787]),
            'hist_freq': array([12, 86, 286, 729, 4272, 646, 857, 359, 133, 19],
                               dtype=int32),
            'id': 26223583,
            'negative_count': 1583,
            'neutral_count': 3735,
            'positive_count': 2081,
            'response_time': 92.83294173389764,
            'responses': 7561,
            'screen_name': 'airberlin',
            'sentiment_score_max': 1.787,
            'sentiment_score_mean': 0.0485814839843222,
            'sentiment_score_min': -1.6852,
            'sentiment_score_sd': 0.43191375996042924},
           {'conv_amount': 1378,
            'conv_average_size': 4.053701015965167,
            'conv_total_tweets': 5586,
            'hist_edges': array([-1.4496, -1.12541, -0.80122, -0.47703, -0.15284, 0.17135,
                                 0.49554, 0.81973, 1.14392, 1.46811, 1.7923]),
            'hist_freq': array([11, 57, 178, 206, 1290, 278, 294, 108, 40, 36],
                               dtype=int32),
            'id': 2182373406,
            'negative_count': 550,
            'neutral_count': 1095,
            'positive_count': 853,
            'response_time': 66.98209504555099,
            'responses': 2671,
            'screen_name': 'airberlinAssist',
            'sentiment_score_max': 1.7923,
            'sentiment_score_mean': 0.10467982385908725,
            'sentiment_score_min': -1.4496,
            'sentiment_score_sd': 0.4708936687098626},
           {'conv_amount': 28419,
            'conv_average_size': 2.4032513459305394,
            'conv_total_tweets': 68298,
            'hist_edges': array([-1.7431, -1.39274, -1.04238, -0.69202, -0.34166, 0.0087,
                                 0.35906, 0.70942, 1.05978, 1.41014, 1.7605]),
            'hist_freq': array([52, 363, 1988, 2972, 27139, 5095, 4626, 2317, 924,
                                136], dtype=int32),
            'id': 38676903,
            'negative_count': 9529,
            'neutral_count': 22917,
            'positive_count': 13166,
            'response_time': 1426.8885019625695,
            'responses': 36797,
            'screen_name': 'easyJet',
            'sentiment_score_max': 1.7605,
            'sentiment_score_mean': 0.04964507366482504,
            'sentiment_score_min': -1.7431,
            'sentiment_score_sd': 0.41064355904418437},
           {'conv_amount': 15193,
            'conv_average_size': 3.5989600473902454,
            'conv_total_tweets': 54679,
            'hist_edges': array([-1.7209, -1.38013, -1.03936, -0.69859, -0.35782, -0.01705,
                                 0.32372, 0.66449, 1.00526, 1.34603, 1.6868]),
            'hist_freq': array([48, 244, 1735, 2610, 3715, 12273, 3361, 1682, 553,
                                88], dtype=int32),
            'id': 1542862735,
            'negative_count': 8473,
            'neutral_count': 8597,
            'positive_count': 9239,
            'response_time': 61.64950503970876,
            'responses': 25729,
            'screen_name': 'Ryanair',
            'sentiment_score_max': 1.6868,
            'sentiment_score_mean': 0.017605906723934774,
            'sentiment_score_min': -1.7208999999999999,
            'sentiment_score_sd': 0.4541679146150501},
           {'conv_amount': 4490,
            'conv_average_size': 2.903118040089087,
            'conv_total_tweets': 13035,
            'hist_edges': array([-1.6657, -1.32405, -0.9824, -0.64075, -0.2991, 0.04255,
                                 0.3842, 0.72585, 1.0675, 1.40915, 1.7508]),
            'hist_freq': array([41, 84, 422, 679, 4140, 798, 787, 416, 155, 49],
                               dtype=int32),
            'id': 253340062,
            'negative_count': 1951,
            'neutral_count': 3315,
            'positive_count': 2305,
            'response_time': 74.46026476242294,
            'responses': 7352,
            'screen_name': 'SingaporeAir',
            'sentiment_score_max': 1.7508,
            'sentiment_score_mean': 0.04382347113987584,
            'sentiment_score_min': -1.6657,
            'sentiment_score_sd': 0.4530326060038637},
           {'conv_amount': 14384,
            'conv_average_size': 2.191115127919911,
            'conv_total_tweets': 31517,
            'hist_edges': array([-1.8681, -1.50191, -1.13572, -0.76953, -0.40334, -0.03715,
                                 0.32904, 0.69523, 1.06142, 1.42761, 1.7938]),
            'hist_freq': array([20, 197, 866, 1316, 2020, 12764, 2043, 1174, 365,
                                75], dtype=int32),
            'id': 218730857,
            'negative_count': 4586,
            'neutral_count': 10846,
            'positive_count': 5408,
            'response_time': 266.75831879339063,
            'responses': 17813,
            'screen_name': 'Qantas',
            'sentiment_score_max': 1.7938,
            'sentiment_score_mean': 0.029318176583493283,
            'sentiment_score_min': -1.8681,
            'sentiment_score_sd': 0.4278116907445962},
           {'conv_amount': 5033,
            'conv_average_size': 4.068348897277965,
            'conv_total_tweets': 20476,
            'hist_edges': array([-1.8347, -1.48197, -1.12924, -0.77651, -0.42378, -0.07105,
                                 0.28168, 0.63441, 0.98714, 1.33987, 1.6926]),
            'hist_freq': array([24, 129, 1106, 1103, 1357, 5132, 1300, 828, 149, 36],
                               dtype=int32),
            'id': 45621423,
            'negative_count': 4001,
            'neutral_count': 3751,
            'positive_count': 3412,
            'response_time': 14.687866640983303,
            'responses': 9085,
            'screen_name': 'EtihadAirways',
            'sentiment_score_max': 1.6926,
            'sentiment_score_mean': -0.04993314224292369,
            'sentiment_score_min': -1.8347,
            'sentiment_score_sd': 0.4876232083606188},
           {'conv_amount': 14168,
            'conv_average_size': 3.189864483342744,
            'conv_total_tweets': 45194,
            'hist_edges': array([-1.6968, -1.35048, -1.00416, -0.65784, -0.31152, 0.0348,
                                 0.38112, 0.72744, 1.07376, 1.42008, 1.7664]),
            'hist_freq': array([54, 291, 1063, 2123, 9933, 2872, 3106, 1597, 541, 126],
                               dtype=int32),
            'id': 20626359,
            'negative_count': 5704,
            'neutral_count': 7541,
            'positive_count': 8461,
            'response_time': 33.47004723595442,
            'responses': 23667,
            'screen_name': 'VirginAtlantic',
            'sentiment_score_max': 1.7664,
            'sentiment_score_mean': 0.09112876163272828,
            'sentiment_score_min': -1.6968,
            'sentiment_score_sd': 0.4786125176350421}]

airlines_abv = ['KLM', 'A.F.', 'B.A.', 'A.A.', 'LU', 'A.B.', 'ABA',
                'EJ', 'RY', 'S.A.', 'QA', 'E.A.', 'V.A.']


def average_conv_length_sentiment_correlation():
    frames = []
    for entry in dataset:
        frames.append({"average_conv_length": entry['conv_average_size'],
                       "sentiment_score": entry['sentiment_score_mean']
                       })
    dataframe = pd.DataFrame(frames)
    ax = sns.regplot(x="average_conv_length", y="sentiment_score", data=dataframe)
    plt.show()


def responses_sentiment_correlation():
    frames = []
    for entry in dataset:
        frames.append({"responses": entry['responses'],
                       "sentiment_score": entry['sentiment_score_mean']})
    dataframe = pd.DataFrame(frames)
    ax = sns.regplot(x="responses", y="sentiment_score", data=dataframe)
    plt.show()


def food_distribution():
    frames = []
    for entry in food_dataset:
        if entry['id'] == 22536055:  # american air
            frq = entry['hist_freq']
            edges = entry['hist_edges']
            fig, ax = plt.subplots()
            ax.bar(edges[:-1], frq, width=np.diff(edges), ec="k", align="edge")
            plt.show()


def stacked_sentiment_bars():
    frames = []

    columns = []
    for entry in dataset:
        columns.append(entry["screen_name"])

    for i, entry in enumerate(dataset):
        total = entry['negative_count'] + entry['neutral_count'] + entry['positive_count']

        frame = {
            "abv": airlines_abv[i],
            "screen_name": entry['screen_name'],
            "negative": entry['negative_count'] * 100 / total,
            "neutral": entry['neutral_count'] * 100 / total,
            "positive": entry['positive_count'] * 100 / total
        }
        pprint.pprint(frame)
        frames.append(frame)

    frames = sorted(frames, reverse=True, key=lambda l: l["abv"])

    df = pd.DataFrame(frames)

    pprint.pprint(df)
    pl = df.plot.barh(stacked=True, x="abv", color=["red", "orange", "green"])

    #plt.show()
    plt.savefig("foo.svg", bbox_inches='tight')


# responses_sentiment_correlation()
# food_distribution()
stacked_sentiment_bars()
